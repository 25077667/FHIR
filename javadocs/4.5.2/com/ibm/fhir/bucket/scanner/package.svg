<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="676px" preserveAspectRatio="none" style="width:3705px;height:676px;" version="1.1" viewBox="0 0 3705 676" width="3705px" zoomAndPan="magnify"><defs><filter height="300%" id="fr4clmzsceyf2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b0d9575ab999429b72cc019b4a2a88d8]
cluster com.ibm.fhir.bucket.scanner--><polygon fill="#FFFFFF" filter="url(#fr4clmzsceyf2)" points="14,150,246,150,253,172.2969,3683,172.2969,3683,636,14,636,14,150" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="253" y1="172.2969" y2="172.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="18" y="164.9951">com.ibm.fhir.bucket.scanner</text><!--MD5=[664a0e6a1e350d8a0a572306d3fcd12d]
cluster com.ibm.fhir.bucket.api--><polygon fill="#FFFFFF" filter="url(#fr4clmzsceyf2)" points="294,22.5,485,22.5,492,44.7969,754,44.7969,754,118.5,294,118.5,294,22.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="294" x2="492" y1="44.7969" y2="44.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="298" y="37.4951">com.ibm.fhir.bucket.api</text><!--MD5=[0d852700fdad35b7061d461d6907a324]
cluster java.io--><polygon fill="#FFFFFF" filter="url(#fr4clmzsceyf2)" points="1426,16,1482,16,1489,38.2969,1757,38.2969,1757,125,1426,125,1426,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1426" x2="1489" y1="38.2969" y2="38.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="1430" y="30.9951">java.io</text><!--MD5=[30e521c74e295f3874ed3be4488915ed]
cluster com.ibm.fhir.model.util--><polygon fill="#FFFFFF" filter="url(#fr4clmzsceyf2)" points="1872,29,2058,29,2065,51.2969,2198,51.2969,2198,112,1872,112,1872,29" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1872" x2="2065" y1="51.2969" y2="51.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="1876" y="43.9951">com.ibm.fhir.model.util</text><!--MD5=[2c04570401409e9b33aaf4ae35bd3a5d]
class com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><a href="BundleBreakerResourceProcessor.html" target="_top" title="BundleBreakerResourceProcessor.html" xlink:actuate="onRequest" xlink:href="BundleBreakerResourceProcessor.html" xlink:show="new" xlink:title="BundleBreakerResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="112.0234" id="com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="392" x="453" y="222"/><ellipse cx="537.75" cy="238" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M540.7188,243.6406 Q540.1406,243.9375 539.5,244.0781 Q538.8594,244.2344 538.1563,244.2344 Q535.6563,244.2344 534.3281,242.5938 Q533.0156,240.9375 533.0156,237.8125 Q533.0156,234.6875 534.3281,233.0313 Q535.6563,231.375 538.1563,231.375 Q538.8594,231.375 539.5,231.5313 Q540.1563,231.6875 540.7188,231.9844 L540.7188,234.7031 Q540.0938,234.125 539.5,233.8594 Q538.9063,233.5781 538.2813,233.5781 Q536.9375,233.5781 536.25,234.6563 Q535.5625,235.7188 535.5625,237.8125 Q535.5625,239.9063 536.25,240.9844 Q536.9375,242.0469 538.2813,242.0469 Q538.9063,242.0469 539.5,241.7813 Q540.0938,241.5 540.7188,240.9219 L540.7188,243.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="214" x="558.25" y="242.1543">BundleBreakerResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="454" x2="844" y1="254" y2="254"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454" x2="844" y1="262" y2="262"/><ellipse cx="464" cy="273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="366" x="473" y="276.2104">BundleBreakerResourceProcessor(COSClient, int, String, String)</text><ellipse cx="464" cy="285.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="473" y="289.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="464,293.6094,468,297.6094,464,301.6094,460,297.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="473" y="301.8198">process(String, Bundle): void</text><polygon fill="#FFFF44" points="464,306.4141,468,310.4141,464,314.4141,460,310.4141" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="473" y="314.6245">saveBundle(String, Bundle, int): void</text><polygon fill="#FFFF44" points="464,319.2188,468,323.2188,464,327.2188,460,323.2188" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="473" y="327.4292">writeBundle(Bundle, String): void</text></a><!--MD5=[a45591fc44653b32084f6c40df0854b1]
class com.ibm.fhir.bucket.scanner.COSReader--><a href="COSReader.html" target="_top" title="COSReader.html" xlink:actuate="onRequest" xlink:href="COSReader.html" xlink:show="new" xlink:title="COSReader.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="176.0469" id="com.ibm.fhir.bucket.scanner.COSReader" style="stroke: #A80036; stroke-width: 1.5;" width="890" x="2242" y="190"/><ellipse cx="2647.75" cy="206" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2650.7188,211.6406 Q2650.1406,211.9375 2649.5,212.0781 Q2648.8594,212.2344 2648.1563,212.2344 Q2645.6563,212.2344 2644.3281,210.5938 Q2643.0156,208.9375 2643.0156,205.8125 Q2643.0156,202.6875 2644.3281,201.0313 Q2645.6563,199.375 2648.1563,199.375 Q2648.8594,199.375 2649.5,199.5313 Q2650.1563,199.6875 2650.7188,199.9844 L2650.7188,202.7031 Q2650.0938,202.125 2649.5,201.8594 Q2648.9063,201.5781 2648.2813,201.5781 Q2646.9375,201.5781 2646.25,202.6563 Q2645.5625,203.7188 2645.5625,205.8125 Q2645.5625,207.9063 2646.25,208.9844 Q2646.9375,210.0469 2648.2813,210.0469 Q2648.9063,210.0469 2649.5,209.7813 Q2650.0938,209.5 2650.7188,208.9219 L2650.7188,211.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="2668.25" y="210.1543">COSReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2243" x2="3131" y1="222" y2="222"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2243" x2="3131" y1="230" y2="230"/><ellipse cx="2253" cy="241" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="864" x="2262" y="244.2104">COSReader(ExecutorService, FileType, COSClient, Consumer&lt;ResourceEntry&gt;, int, DataAccess, boolean, int, boolean, double, Collection&lt;BucketPath&gt;)</text><ellipse cx="2253" cy="253.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2262" y="257.0151">signalStop(): void</text><ellipse cx="2253" cy="266.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2262" y="269.8198">waitForStop(): void</text><ellipse cx="2253" cy="279.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2262" y="282.6245">init(): void</text><ellipse cx="2253" cy="292.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="2262" y="295.4292">mainAllocationLoop(): void</text><polygon fill="#FFFF44" points="2253,300.0234,2257,304.0234,2253,308.0234,2249,304.0234" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2262" y="308.2339">safeSleep(long): void</text><polygon fill="#FFFF44" points="2253,312.8281,2257,316.8281,2253,320.8281,2249,316.8281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2262" y="321.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2253" cy="330.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="320" x="2262" y="333.8433">processNDJSON(BucketLoaderJob, BufferedReader): void</text><polygon fill="#FFFF44" points="2253,338.4375,2257,342.4375,2253,346.4375,2249,342.4375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="326" x="2262" y="346.6479">process(BucketLoaderJob, Resource, int, String): boolean</text><ellipse cx="2253" cy="356.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="2262" y="359.4526">validateInput(Resource): List&lt;Issue&gt;</text></a><!--MD5=[dbdff8a2fae6c321988998aab8ea5b0a]
class com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><a href="Sha256InputStreamDecorator.html" target="_top" title="Sha256InputStreamDecorator.html" xlink:actuate="onRequest" xlink:href="Sha256InputStreamDecorator.html" xlink:show="new" xlink:title="Sha256InputStreamDecorator.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="112.0234" id="com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="1299.5" y="222"/><ellipse cx="1338.35" cy="238" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1341.3188,243.6406 Q1340.7406,243.9375 1340.1,244.0781 Q1339.4594,244.2344 1338.7563,244.2344 Q1336.2563,244.2344 1334.9281,242.5938 Q1333.6156,240.9375 1333.6156,237.8125 Q1333.6156,234.6875 1334.9281,233.0313 Q1336.2563,231.375 1338.7563,231.375 Q1339.4594,231.375 1340.1,231.5313 Q1340.7563,231.6875 1341.3188,231.9844 L1341.3188,234.7031 Q1340.6938,234.125 1340.1,233.8594 Q1339.5063,233.5781 1338.8813,233.5781 Q1337.5375,233.5781 1336.85,234.6563 Q1336.1625,235.7188 1336.1625,237.8125 Q1336.1625,239.9063 1336.85,240.9844 Q1337.5375,242.0469 1338.8813,242.0469 Q1339.5063,242.0469 1340.1,241.7813 Q1340.6938,241.5 1341.3188,240.9219 L1341.3188,243.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="188" x="1357.65" y="242.1543">Sha256InputStreamDecorator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1300.5" x2="1571.5" y1="254" y2="254"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1300.5" x2="1571.5" y1="262" y2="262"/><ellipse cx="1310.5" cy="273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="1319.5" y="276.2104">Sha256InputStreamDecorator(InputStream)</text><ellipse cx="1310.5" cy="285.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="1319.5" y="289.0151">getBase64Hash(): String</text><ellipse cx="1310.5" cy="298.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1319.5" y="301.8198">read(): int</text><ellipse cx="1310.5" cy="311.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1319.5" y="314.6245">read(byte[], int, int): int</text><ellipse cx="1310.5" cy="324.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="1319.5" y="327.4292">close(): void</text></a><!--MD5=[bb92dc037dab9e7188241d686cc36a7e]
class com.ibm.fhir.bucket.scanner.ResourceHandler--><a href="ResourceHandler.html" target="_top" title="ResourceHandler.html" xlink:actuate="onRequest" xlink:href="ResourceHandler.html" xlink:show="new" xlink:title="ResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="99.2188" id="com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="395" x="22.5" y="228.5"/><ellipse cx="161.75" cy="244.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M164.7188,250.1406 Q164.1406,250.4375 163.5,250.5781 Q162.8594,250.7344 162.1563,250.7344 Q159.6563,250.7344 158.3281,249.0938 Q157.0156,247.4375 157.0156,244.3125 Q157.0156,241.1875 158.3281,239.5313 Q159.6563,237.875 162.1563,237.875 Q162.8594,237.875 163.5,238.0313 Q164.1563,238.1875 164.7188,238.4844 L164.7188,241.2031 Q164.0938,240.625 163.5,240.3594 Q162.9063,240.0781 162.2813,240.0781 Q160.9375,240.0781 160.25,241.1563 Q159.5625,242.2188 159.5625,244.3125 Q159.5625,246.4063 160.25,247.4844 Q160.9375,248.5469 162.2813,248.5469 Q162.9063,248.5469 163.5,248.2813 Q164.0938,248 164.7188,247.4219 L164.7188,250.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="182.25" y="248.6543">ResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="416.5" y1="260.5" y2="260.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="416.5" y1="268.5" y2="268.5"/><ellipse cx="33.5" cy="279.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="42.5" y="282.7104">ResourceHandler(ExecutorService, int, IResourceEntryProcessor)</text><ellipse cx="33.5" cy="292.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="42.5" y="295.5151">signalStop(): void</text><ellipse cx="33.5" cy="305.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="42.5" y="308.3198">waitForStop(): void</text><ellipse cx="33.5" cy="317.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="42.5" y="321.1245">process(ResourceEntry): boolean</text></a><!--MD5=[0e3cd8e43eee1ca12f784a2afaf30c31]
class com.ibm.fhir.bucket.scanner.DataAccess--><a href="DataAccess.html" target="_top" title="DataAccess.html" xlink:actuate="onRequest" xlink:href="DataAccess.html" xlink:show="new" xlink:title="DataAccess.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="201.6563" id="com.ibm.fhir.bucket.scanner.DataAccess" style="stroke: #A80036; stroke-width: 1.5;" width="507" x="3167.5" y="177"/><ellipse cx="3379.75" cy="193" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3382.7188,198.6406 Q3382.1406,198.9375 3381.5,199.0781 Q3380.8594,199.2344 3380.1563,199.2344 Q3377.6563,199.2344 3376.3281,197.5938 Q3375.0156,195.9375 3375.0156,192.8125 Q3375.0156,189.6875 3376.3281,188.0313 Q3377.6563,186.375 3380.1563,186.375 Q3380.8594,186.375 3381.5,186.5313 Q3382.1563,186.6875 3382.7188,186.9844 L3382.7188,189.7031 Q3382.0938,189.125 3381.5,188.8594 Q3380.9063,188.5781 3380.2813,188.5781 Q3378.9375,188.5781 3378.25,189.6563 Q3377.5625,190.7188 3377.5625,192.8125 Q3377.5625,194.9063 3378.25,195.9844 Q3378.9375,197.0469 3380.2813,197.0469 Q3380.9063,197.0469 3381.5,196.7813 Q3382.0938,196.5 3382.7188,195.9219 L3382.7188,198.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="3400.25" y="197.1543">DataAccess</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3168.5" x2="3673.5" y1="209" y2="209"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3168.5" x2="3673.5" y1="217" y2="217"/><ellipse cx="3178.5" cy="228" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="3187.5" y="231.2104">DataAccess(IDatabaseAdapter, ITransactionProvider, String)</text><ellipse cx="3178.5" cy="240.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="3187.5" y="244.0151">init(): void</text><ellipse cx="3178.5" cy="253.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="3187.5" y="256.8198">registerBucketItem(CosItem): void</text><ellipse cx="3178.5" cy="266.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="481" x="3187.5" y="269.6245">allocateJobs(List&lt;BucketLoaderJob&gt;, FileType, int, int, Collection&lt;BucketPath&gt;): void</text><ellipse cx="3178.5" cy="279.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="3187.5" y="282.4292">recordLogicalId(String, String, long, int, Integer): void</text><ellipse cx="3178.5" cy="292.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="3187.5" y="295.2339">heartbeat(): void</text><ellipse cx="3178.5" cy="304.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="3187.5" y="308.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="3178.5" cy="317.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="340" x="3187.5" y="320.8433">recordLogicalIds(long, int, List&lt;ResourceIdValue&gt;, int): void</text><ellipse cx="3178.5" cy="330.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="3187.5" y="333.6479">recordErrors(long, int, List&lt;ResourceBundleError&gt;): void</text><ellipse cx="3178.5" cy="343.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="272" x="3187.5" y="346.4526">getLastProcessedLineNumber(long, int): Integer</text><ellipse cx="3178.5" cy="356.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="3187.5" y="359.2573">getResourceRefsForLine(long, int, int): List&lt;ResourceRef&gt;</text><ellipse cx="3178.5" cy="368.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="3187.5" y="372.062">selectRandomPatientIds(List&lt;String&gt;, int): void</text></a><!--MD5=[5da28120c68ca992e1f1d65bc7d035a4]
class com.ibm.fhir.bucket.scanner.LoaderQueue--><a href="LoaderQueue.html" target="_top" title="LoaderQueue.html" xlink:actuate="onRequest" xlink:href="LoaderQueue.html" xlink:show="new" xlink:title="LoaderQueue.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="60.8047" id="com.ibm.fhir.bucket.scanner.LoaderQueue" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="2579" y="503"/><ellipse cx="2640.75" cy="519" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2636.6719,514.7656 L2636.6719,512.6094 L2644.0625,512.6094 L2644.0625,514.7656 L2641.5938,514.7656 L2641.5938,522.8438 L2644.0625,522.8438 L2644.0625,525 L2636.6719,525 L2636.6719,522.8438 L2639.1406,522.8438 L2639.1406,514.7656 L2636.6719,514.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="2661.25" y="523.1543">LoaderQueue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2580" x2="2794" y1="535" y2="535"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2580" x2="2794" y1="543" y2="543"/><ellipse cx="2590" cy="554" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="190" x="2599" y="557.2104">processEntry(String, String): void</text></a><!--MD5=[768677c16d4a67509cbd4114396ece65]
class com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><a href="FHIRClientResourceProcessor.html" target="_top" title="FHIRClientResourceProcessor.html" xlink:actuate="onRequest" xlink:href="FHIRClientResourceProcessor.html" xlink:show="new" xlink:title="FHIRClientResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="86.4141" id="com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="880" y="235"/><ellipse cx="975.75" cy="251" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M978.7188,256.6406 Q978.1406,256.9375 977.5,257.0781 Q976.8594,257.2344 976.1563,257.2344 Q973.6563,257.2344 972.3281,255.5938 Q971.0156,253.9375 971.0156,250.8125 Q971.0156,247.6875 972.3281,246.0313 Q973.6563,244.375 976.1563,244.375 Q976.8594,244.375 977.5,244.5313 Q978.1563,244.6875 978.7188,244.9844 L978.7188,247.7031 Q978.0938,247.125 977.5,246.8594 Q976.9063,246.5781 976.2813,246.5781 Q974.9375,246.5781 974.25,247.6563 Q973.5625,248.7188 973.5625,250.8125 Q973.5625,252.9063 974.25,253.9844 Q974.9375,255.0469 976.2813,255.0469 Q976.9063,255.0469 977.5,254.7813 Q978.0938,254.5 978.7188,253.9219 L978.7188,256.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="184" x="996.25" y="255.1543">FHIRClientResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="881" x2="1263" y1="267" y2="267"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="881" x2="1263" y1="275" y2="275"/><ellipse cx="891" cy="286" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="343" x="900" y="289.2104">FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)</text><ellipse cx="891" cy="298.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="900" y="302.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="891,306.6094,895,310.6094,891,314.6094,887,310.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="900" y="314.8198">processBadRequest(ResourceEntry, FhirServerResponse): void</text></a><!--MD5=[434e0b04adee20dec453537cb4a35e44]
class com.ibm.fhir.bucket.scanner.NoCloseInputStream--><a href="NoCloseInputStream.html" target="_top" title="NoCloseInputStream.html" xlink:actuate="onRequest" xlink:href="NoCloseInputStream.html" xlink:show="new" xlink:title="NoCloseInputStream.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="73.6094" id="com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="1607.5" y="241"/><ellipse cx="1649.95" cy="257" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1652.9188,262.6406 Q1652.3406,262.9375 1651.7,263.0781 Q1651.0594,263.2344 1650.3563,263.2344 Q1647.8563,263.2344 1646.5281,261.5938 Q1645.2156,259.9375 1645.2156,256.8125 Q1645.2156,253.6875 1646.5281,252.0313 Q1647.8563,250.375 1650.3563,250.375 Q1651.0594,250.375 1651.7,250.5313 Q1652.3563,250.6875 1652.9188,250.9844 L1652.9188,253.7031 Q1652.2938,253.125 1651.7,252.8594 Q1651.1063,252.5781 1650.4813,252.5781 Q1649.1375,252.5781 1648.45,253.6563 Q1647.7625,254.7188 1647.7625,256.8125 Q1647.7625,258.9063 1648.45,259.9844 Q1649.1375,261.0469 1650.4813,261.0469 Q1651.1063,261.0469 1651.7,260.7813 Q1652.2938,260.5 1652.9188,259.9219 L1652.9188,262.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="1670.05" y="261.1543">NoCloseInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1608.5" x2="1827.5" y1="273" y2="273"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1608.5" x2="1827.5" y1="281" y2="281"/><ellipse cx="1618.5" cy="292" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="1627.5" y="295.2104">NoCloseInputStream(InputStream)</text><ellipse cx="1618.5" cy="304.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="1627.5" y="308.0151">close(): void</text></a><!--MD5=[e1a4af336e160f27c55bcbc5171d2cfa]
class com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><a href="IdReferenceMappingVisitor.html" target="_top" title="IdReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="IdReferenceMappingVisitor.html" xlink:show="new" xlink:title="IdReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="86.4141" id="com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="343" x="1863.5" y="235"/><ellipse cx="1947.25" cy="251" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1950.2188,256.6406 Q1949.6406,256.9375 1949,257.0781 Q1948.3594,257.2344 1947.6563,257.2344 Q1945.1563,257.2344 1943.8281,255.5938 Q1942.5156,253.9375 1942.5156,250.8125 Q1942.5156,247.6875 1943.8281,246.0313 Q1945.1563,244.375 1947.6563,244.375 Q1948.3594,244.375 1949,244.5313 Q1949.6563,244.6875 1950.2188,244.9844 L1950.2188,247.7031 Q1949.5938,247.125 1949,246.8594 Q1948.4063,246.5781 1947.7813,246.5781 Q1946.4375,246.5781 1945.75,247.6563 Q1945.0625,248.7188 1945.0625,250.8125 Q1945.0625,252.9063 1945.75,253.9844 Q1946.4375,255.0469 1947.7813,255.0469 Q1948.4063,255.0469 1949,254.7813 Q1949.5938,254.5 1950.2188,253.9219 L1950.2188,256.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="1967.75" y="255.1543">IdReferenceMappingVisitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1864.5" x2="2205.5" y1="267" y2="267"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1864.5" x2="2205.5" y1="275" y2="275"/><ellipse cx="1874.5" cy="286" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="317" x="1883.5" y="289.2104">IdReferenceMappingVisitor(Map&lt;String, String&gt;, String)</text><ellipse cx="1874.5" cy="298.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="1883.5" y="302.0151">visit(String, int, Resource): boolean</text><ellipse cx="1874.5" cy="311.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="1883.5" y="314.8198">visit(String, int, DomainResource): boolean</text></a><!--MD5=[117b4744d87af26d6202ac4a9292f012]
class com.ibm.fhir.bucket.scanner.CosScanner--><a href="CosScanner.html" target="_top" title="CosScanner.html" xlink:actuate="onRequest" xlink:href="CosScanner.html" xlink:show="new" xlink:title="CosScanner.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="188.8516" id="com.ibm.fhir.bucket.scanner.CosScanner" style="stroke: #A80036; stroke-width: 1.5;" width="504" x="2830" y="439"/><ellipse cx="3040.25" cy="455" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3043.2188,460.6406 Q3042.6406,460.9375 3042,461.0781 Q3041.3594,461.2344 3040.6563,461.2344 Q3038.1563,461.2344 3036.8281,459.5938 Q3035.5156,457.9375 3035.5156,454.8125 Q3035.5156,451.6875 3036.8281,450.0313 Q3038.1563,448.375 3040.6563,448.375 Q3041.3594,448.375 3042,448.5313 Q3042.6563,448.6875 3043.2188,448.9844 L3043.2188,451.7031 Q3042.5938,451.125 3042,450.8594 Q3041.4063,450.5781 3040.7813,450.5781 Q3039.4375,450.5781 3038.75,451.6563 Q3038.0625,452.7188 3038.0625,454.8125 Q3038.0625,456.9063 3038.75,457.9844 Q3039.4375,459.0469 3040.7813,459.0469 Q3041.4063,459.0469 3042,458.7813 Q3042.5938,458.5 3043.2188,457.9219 L3043.2188,460.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="3060.75" y="459.1543">CosScanner</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2831" x2="3333" y1="471" y2="471"/><ellipse cx="2841" cy="482" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="178" x="2850" y="485.2104">HEARTBEAT_INTERVAL_MS: long</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2831" x2="3333" y1="491.8047" y2="491.8047"/><ellipse cx="2841" cy="502.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="478" x="2850" y="506.0151">CosScanner(COSClient, Collection&lt;String&gt;, DataAccess, Set&lt;FileType&gt;, String, int)</text><ellipse cx="2841" cy="515.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2850" y="518.8198">init(): void</text><ellipse cx="2841" cy="528.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2850" y="531.6245">signalStop(): void</text><ellipse cx="2841" cy="541.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2850" y="544.4292">waitForStop(): void</text><ellipse cx="2841" cy="554.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2850" y="557.2339">mainLoop(): void</text><polygon fill="#FFFF44" points="2841,561.8281,2845,565.8281,2841,569.8281,2837,565.8281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2850" y="570.0386">safeSleep(long): void</text><polygon fill="#FFFF44" points="2841,574.6328,2845,578.6328,2841,582.6328,2837,578.6328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="2850" y="582.8433">scan(): void</text><polygon fill="#FFFF44" points="2841,587.4375,2845,591.4375,2841,595.4375,2837,591.4375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="145" x="2850" y="595.6479">fileTyper(String): FileType</text><polygon fill="#FFFF44" points="2841,600.2422,2845,604.2422,2841,608.2422,2837,604.2422" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="2850" y="608.4526">handle(CosItem): void</text><polygon fill="#FFFF44" points="2841,613.0469,2845,617.0469,2841,621.0469,2837,617.0469" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2850" y="621.2573">heartbeat(): void</text></a><!--MD5=[2367946adcfdd070486357efec45442a]
class com.ibm.fhir.bucket.api.IResourceEntryProcessor--><a href="../api/IResourceEntryProcessor.html" target="_top" title="../api/IResourceEntryProcessor.html" xlink:actuate="onRequest" xlink:href="../api/IResourceEntryProcessor.html" xlink:show="new" xlink:title="../api/IResourceEntryProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="552.5" y="49.5"/><ellipse cx="569.3" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M565.2219,61.2656 L565.2219,59.1094 L572.6125,59.1094 L572.6125,61.2656 L570.1438,61.2656 L570.1438,69.3438 L572.6125,69.3438 L572.6125,71.5 L565.2219,71.5 L565.2219,69.3438 L567.6906,69.3438 L567.6906,61.2656 L565.2219,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="157" x="583.7" y="69.6543">IResourceEntryProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="553.5" x2="744.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="553.5" x2="744.5" y1="89.5" y2="89.5"/><ellipse cx="563.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="572.5" y="103.7104">process(ResourceEntry): void</text></a><!--MD5=[5722a3d6808db9ca982f2598f0d72edd]
class com.ibm.fhir.bucket.api.IResourceHandler--><a href="../api/IResourceHandler.html" target="_top" title="../api/IResourceHandler.html" xlink:actuate="onRequest" xlink:href="../api/IResourceHandler.html" xlink:show="new" xlink:title="../api/IResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="302.5" y="49.5"/><ellipse cx="350.25" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M346.1719,61.2656 L346.1719,59.1094 L353.5625,59.1094 L353.5625,61.2656 L351.0938,61.2656 L351.0938,69.3438 L353.5625,69.3438 L353.5625,71.5 L346.1719,71.5 L346.1719,69.3438 L348.6406,69.3438 L348.6406,61.2656 L346.1719,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="370.75" y="69.6543">IResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="303.5" x2="516.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="303.5" x2="516.5" y1="89.5" y2="89.5"/><ellipse cx="313.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="189" x="322.5" y="103.7104">process(ResourceEntry): boolean</text></a><!--MD5=[fa9a3b769145f837d7bc2faadf88dde7]
class java.io.InputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="60.8047" id="java.io.InputStream" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="1434.5" y="49.5"/><ellipse cx="1449.5" cy="65.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1449.6094,60.8438 L1448.4531,65.9219 L1450.7813,65.9219 L1449.6094,60.8438 Z M1448.125,58.6094 L1451.1094,58.6094 L1454.4688,71 L1452.0156,71 L1451.25,67.9375 L1447.9688,67.9375 L1447.2188,71 L1444.7813,71 L1448.125,58.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="1463.5" y="69.6543">InputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1435.5" x2="1542.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1435.5" x2="1542.5" y1="89.5" y2="89.5"/><ellipse cx="1445.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="1454.5" y="103.7104">read(): int</text></a><!--MD5=[7bc894eae69de9994c6e46ebc6cb7767]
class java.io.PushbackInputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="73.6094" id="java.io.PushbackInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="1579" y="43"/><ellipse cx="1594" cy="59" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1596.9688,64.6406 Q1596.3906,64.9375 1595.75,65.0781 Q1595.1094,65.2344 1594.4063,65.2344 Q1591.9063,65.2344 1590.5781,63.5938 Q1589.2656,61.9375 1589.2656,58.8125 Q1589.2656,55.6875 1590.5781,54.0313 Q1591.9063,52.375 1594.4063,52.375 Q1595.1094,52.375 1595.75,52.5313 Q1596.4063,52.6875 1596.9688,52.9844 L1596.9688,55.7031 Q1596.3438,55.125 1595.75,54.8594 Q1595.1563,54.5781 1594.5313,54.5781 Q1593.1875,54.5781 1592.5,55.6563 Q1591.8125,56.7188 1591.8125,58.8125 Q1591.8125,60.9063 1592.5,61.9844 Q1593.1875,63.0469 1594.5313,63.0469 Q1595.1563,63.0469 1595.75,62.7813 Q1596.3438,62.5 1596.9688,61.9219 L1596.9688,64.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="1608" y="63.1543">PushbackInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1580" x2="1748" y1="75" y2="75"/><polygon fill="none" points="1590,81,1594,85,1590,89,1586,85" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="1599" y="89.2104">buf: byte[]</text><polygon fill="none" points="1590,93.8047,1594,97.8047,1590,101.8047,1586,97.8047" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="1599" y="102.0151">pos: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1580" x2="1748" y1="108.6094" y2="108.6094"/></a><!--MD5=[122ab473db8428a74a4b9eae00315f16]
class com.ibm.fhir.model.util.ReferenceMappingVisitor--><a href="../../model/util/ReferenceMappingVisitor.html" target="_top" title="../../model/util/ReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="../../model/util/ReferenceMappingVisitor.html" xlink:show="new" xlink:title="../../model/util/ReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fr4clmzsceyf2)" height="48" id="com.ibm.fhir.model.util.ReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="310" x="1880" y="56"/><ellipse cx="1895" cy="72" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1897.9688,77.6406 Q1897.3906,77.9375 1896.75,78.0781 Q1896.1094,78.2344 1895.4063,78.2344 Q1892.9063,78.2344 1891.5781,76.5938 Q1890.2656,74.9375 1890.2656,71.8125 Q1890.2656,68.6875 1891.5781,67.0313 Q1892.9063,65.375 1895.4063,65.375 Q1896.1094,65.375 1896.75,65.5313 Q1897.4063,65.6875 1897.9688,65.9844 L1897.9688,68.7031 Q1897.3438,68.125 1896.75,67.8594 Q1896.1563,67.5781 1895.5313,67.5781 Q1894.1875,67.5781 1893.5,68.6563 Q1892.8125,69.7188 1892.8125,71.8125 Q1892.8125,73.9063 1893.5,74.9844 Q1894.1875,76.0469 1895.5313,76.0469 Q1896.1563,76.0469 1896.75,75.7813 Q1897.3438,75.5 1897.9688,74.9219 L1897.9688,77.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156" x="1909" y="76.1543">ReferenceMappingVisitor</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="120" x="2073" y="53"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="118" x="2074" y="65.1387">T extends Visitable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1881" x2="2189" y1="88" y2="88"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1881" x2="2189" y1="96" y2="96"/></a><!--MD5=[e077fa6cee75e7ddad706340d5a422b3]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><path d="M649,130.7328 C649,158.6149 649,193.2597 649,221.9405 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="642.0001,130.5036,649,110.5036,656.0001,130.5035,642.0001,130.5036" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[869ba41b732a6c73c189fc634a550b36]
reverse link java.io.InputStream to com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><path d="M1475.6401,129.9107 C1468.1395,157.9317 1458.7587,192.9771 1451.0058,221.9405 " fill="none" id="java.io.InputStream&lt;-com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1468.9014,128.0134,1480.8349,110.5036,1482.4253,131.6335,1468.9014,128.0134" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[12bd4cb48c7236030a4f7ce4c8be1d17]
reverse link com.ibm.fhir.bucket.api.IResourceHandler to com.ibm.fhir.bucket.scanner.ResourceHandler--><path d="M366.6917,125.1318 C337.2104,155.8544 298.1798,196.5284 267.7907,228.197 " fill="none" id="com.ibm.fhir.bucket.api.IResourceHandler&lt;-com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="361.8305,120.0876,380.7289,110.5036,371.932,129.7809,361.8305,120.0876" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b6bfc2b178dd5439783ec5833e79203b]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><path d="M764.8855,112.4606 C797.2344,122.9765 831.999,135.6762 863,150 C914.7578,173.9144 969.5949,207.8637 1010.1067,234.7904 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="762.5919,119.0769,745.64,106.3634,766.8202,105.7307,762.5919,119.0769" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[99ab7726ceb1317eb372bc9558f40dad]
reverse link java.io.PushbackInputStream to com.ibm.fhir.bucket.scanner.NoCloseInputStream--><path d="M1679.5103,136.8711 C1688.6326,170.3196 1699.906,211.6555 1707.8886,240.9247 " fill="none" id="java.io.PushbackInputStream&lt;-com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1672.6661,138.3794,1674.157,117.2423,1686.1728,134.6957,1672.6661,138.3794" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[390a4327ac082dbcdf8c6bc63e2f449f]
reverse link com.ibm.fhir.model.util.ReferenceMappingVisitor to com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><path d="M2035,124.4537 C2035,157.3918 2035,202.0411 2035,234.701 " fill="none" id="com.ibm.fhir.model.util.ReferenceMappingVisitor&lt;-com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2028.0001,124.2787,2035,104.2787,2042.0001,124.2787,2028.0001,124.2787" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0c5a778256af4f247216e865b64b8a5f]
link com.ibm.fhir.bucket.scanner.COSReader to com.ibm.fhir.bucket.scanner.DataAccess--><!--MD5=[6bc5f1f7f04d083924fb730a1955ea97]
link com.ibm.fhir.bucket.scanner.COSReader to com.ibm.fhir.bucket.scanner.LoaderQueue--><!--MD5=[4937a66a549d7072a2d3615583913a6e]
link com.ibm.fhir.bucket.scanner.LoaderQueue to com.ibm.fhir.bucket.scanner.CosScanner--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="186" x="1761.5" y="663.2822">UMLDoclet 2.0.7, PlantUML 1.2019.12</text><!--MD5=[1fe9cdca86deff044d5d558f0fac2962]
@startuml
    namespace com.ibm.fhir.bucket.scanner {

        class BundleBreakerResourceProcessor [[BundleBreakerResourceProcessor.html]] {
            +BundleBreakerResourceProcessor(COSClient, int, String, String)
            +process(ResourceEntry): void
            #process(String, Bundle): void
            #saveBundle(String, Bundle, int): void
            #writeBundle(Bundle, String): void
        }

        class COSReader [[COSReader.html]] {
            +COSReader(ExecutorService, FileType, COSClient, Consumer<ResourceEntry>, int, DataAccess, boolean, int, boolean, double, Collection<BucketPath>)
            +signalStop(): void
            +waitForStop(): void
            +init(): void
            +mainAllocationLoop(): void
            #safeSleep(long): void
            #markJobDone(BucketLoaderJob): void
            +processNDJSON(BucketLoaderJob, BufferedReader): void
            #process(BucketLoaderJob, Resource, int, String): boolean
            +validateInput(Resource): List<Issue>
        }

        class Sha256InputStreamDecorator [[Sha256InputStreamDecorator.html]] {
            +Sha256InputStreamDecorator(InputStream)
            +getBase64Hash(): String
            +read(): int
            +read(byte[], int, int): int
            +close(): void
        }

        class ResourceHandler [[ResourceHandler.html]] {
            +ResourceHandler(ExecutorService, int, IResourceEntryProcessor)
            +signalStop(): void
            +waitForStop(): void
            +process(ResourceEntry): boolean
        }

        class DataAccess [[DataAccess.html]] {
            +DataAccess(IDatabaseAdapter, ITransactionProvider, String)
            +init(): void
            +registerBucketItem(CosItem): void
            +allocateJobs(List<BucketLoaderJob>, FileType, int, int, Collection<BucketPath>): void
            +recordLogicalId(String, String, long, int, Integer): void
            +heartbeat(): void
            +markJobDone(BucketLoaderJob): void
            +recordLogicalIds(long, int, List<ResourceIdValue>, int): void
            +recordErrors(long, int, List<ResourceBundleError>): void
            +getLastProcessedLineNumber(long, int): Integer
            +getResourceRefsForLine(long, int, int): List<ResourceRef>
            +selectRandomPatientIds(List<String>, int): void
        }

        interface LoaderQueue [[LoaderQueue.html]] {
            {abstract} +processEntry(String, String): void
        }

        class FHIRClientResourceProcessor [[FHIRClientResourceProcessor.html]] {
            +FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)
            +process(ResourceEntry): void
            #processBadRequest(ResourceEntry, FhirServerResponse): void
        }

        class NoCloseInputStream [[NoCloseInputStream.html]] {
            +NoCloseInputStream(InputStream)
            +close(): void
        }

        class IdReferenceMappingVisitor [[IdReferenceMappingVisitor.html]] {
            +IdReferenceMappingVisitor(Map<String, String>, String)
            +visit(String, int, Resource): boolean
            +visit(String, int, DomainResource): boolean
        }

        class CosScanner [[CosScanner.html]] {
            {static} +HEARTBEAT_INTERVAL_MS: long
            +CosScanner(COSClient, Collection<String>, DataAccess, Set<FileType>, String, int)
            +init(): void
            +signalStop(): void
            +waitForStop(): void
            +mainLoop(): void
            #safeSleep(long): void
            #scan(): void
            {static} #fileTyper(String): FileType
            #handle(CosItem): void
            #heartbeat(): void
        }

        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. BundleBreakerResourceProcessor
        java.io.InputStream <|- - Sha256InputStreamDecorator
        com.ibm.fhir.bucket.api.IResourceHandler <|.. ResourceHandler
        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. FHIRClientResourceProcessor
        java.io.PushbackInputStream <|- - NoCloseInputStream
        com.ibm.fhir.model.util.ReferenceMappingVisitor <|- - IdReferenceMappingVisitor
    }

    namespace com.ibm.fhir.bucket.api {
        interface IResourceEntryProcessor [[../api/IResourceEntryProcessor.html]] {
            {abstract} +process(ResourceEntry): void
        }
        interface IResourceHandler [[../api/IResourceHandler.html]] {
            {abstract} +process(ResourceEntry): boolean
        }
    }

    namespace java.io {
        abstract class InputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true]] {
            {abstract} +read(): int
        }
        class PushbackInputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true]] {
            #buf: byte[]
            #pos: int
        }
    }

    namespace com.ibm.fhir.model.util {
        class ReferenceMappingVisitor<T extends Visitable> [[../../model/util/ReferenceMappingVisitor.html]] {
        }
    }

    center footer UMLDoclet 2.0.7, PlantUML 1.2019.12
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>