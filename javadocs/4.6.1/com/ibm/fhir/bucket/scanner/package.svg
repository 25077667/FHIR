<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="710px" preserveAspectRatio="none" style="width:3343px;height:710px;" version="1.1" viewBox="0 0 3343 710" width="3343px" zoomAndPan="magnify"><defs><filter height="300%" id="fl5rla86uokq0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b0d9575ab999429b72cc019b4a2a88d8]
cluster com.ibm.fhir.bucket.scanner--><polygon fill="#FFFFFF" filter="url(#fl5rla86uokq0)" points="22,173,254,173,261,195.2969,3321,195.2969,3321,662,22,662,22,173" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="261" y1="195.2969" y2="195.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="26" y="187.9951">com.ibm.fhir.bucket.scanner</text><!--MD5=[664a0e6a1e350d8a0a572306d3fcd12d]
cluster com.ibm.fhir.bucket.api--><polygon fill="#FFFFFF" filter="url(#fl5rla86uokq0)" points="299,30.5,490,30.5,497,52.7969,774,52.7969,774,142.5,299,142.5,299,30.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="299" x2="497" y1="52.7969" y2="52.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="303" y="45.4951">com.ibm.fhir.bucket.api</text><!--MD5=[0d852700fdad35b7061d461d6907a324]
cluster java.io--><polygon fill="#FFFFFF" filter="url(#fl5rla86uokq0)" points="1434,24,1490,24,1497,46.2969,1781,46.2969,1781,149,1434,149,1434,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1434" x2="1497" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="1438" y="38.9951">java.io</text><!--MD5=[30e521c74e295f3874ed3be4488915ed]
cluster com.ibm.fhir.model.util--><polygon fill="#FFFFFF" filter="url(#fl5rla86uokq0)" points="1881,37,2067,37,2074,59.2969,2221,59.2969,2221,136,1881,136,1881,37" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1881" x2="2074" y1="59.2969" y2="59.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="1885" y="51.9951">com.ibm.fhir.model.util</text><!--MD5=[bb92dc037dab9e7188241d686cc36a7e]
class com.ibm.fhir.bucket.scanner.ResourceHandler--><a href="ResourceHandler.html" target="_top" title="ResourceHandler.html" xlink:actuate="onRequest" xlink:href="ResourceHandler.html" xlink:show="new" xlink:title="ResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="99.2188" id="com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="395" x="38.5" y="259.5"/><ellipse cx="177.75" cy="275.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M180.7188,281.1406 Q180.1406,281.4375 179.5,281.5781 Q178.8594,281.7344 178.1563,281.7344 Q175.6563,281.7344 174.3281,280.0938 Q173.0156,278.4375 173.0156,275.3125 Q173.0156,272.1875 174.3281,270.5313 Q175.6563,268.875 178.1563,268.875 Q178.8594,268.875 179.5,269.0313 Q180.1563,269.1875 180.7188,269.4844 L180.7188,272.2031 Q180.0938,271.625 179.5,271.3594 Q178.9063,271.0781 178.2813,271.0781 Q176.9375,271.0781 176.25,272.1563 Q175.5625,273.2188 175.5625,275.3125 Q175.5625,277.4063 176.25,278.4844 Q176.9375,279.5469 178.2813,279.5469 Q178.9063,279.5469 179.5,279.2813 Q180.0938,279 180.7188,278.4219 L180.7188,281.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="198.25" y="279.6543">ResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39.5" x2="432.5" y1="291.5" y2="291.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="39.5" x2="432.5" y1="299.5" y2="299.5"/><ellipse cx="49.5" cy="310.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="58.5" y="313.7104">ResourceHandler(ExecutorService, int, IResourceEntryProcessor)</text><ellipse cx="49.5" cy="323.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="58.5" y="326.5151">signalStop(): void</text><ellipse cx="49.5" cy="336.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="58.5" y="339.3198">waitForStop(): void</text><ellipse cx="49.5" cy="348.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="58.5" y="352.1245">process(ResourceEntry): boolean</text></a><!--MD5=[117b4744d87af26d6202ac4a9292f012]
class com.ibm.fhir.bucket.scanner.CosScanner--><a href="CosScanner.html" target="_top" title="CosScanner.html" xlink:actuate="onRequest" xlink:href="CosScanner.html" xlink:show="new" xlink:title="CosScanner.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="188.8516" id="com.ibm.fhir.bucket.scanner.CosScanner" style="stroke: #A80036; stroke-width: 1.5;" width="504" x="2258" y="214.5"/><ellipse cx="2468.25" cy="230.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2471.2188,236.1406 Q2470.6406,236.4375 2470,236.5781 Q2469.3594,236.7344 2468.6563,236.7344 Q2466.1563,236.7344 2464.8281,235.0938 Q2463.5156,233.4375 2463.5156,230.3125 Q2463.5156,227.1875 2464.8281,225.5313 Q2466.1563,223.875 2468.6563,223.875 Q2469.3594,223.875 2470,224.0313 Q2470.6563,224.1875 2471.2188,224.4844 L2471.2188,227.2031 Q2470.5938,226.625 2470,226.3594 Q2469.4063,226.0781 2468.7813,226.0781 Q2467.4375,226.0781 2466.75,227.1563 Q2466.0625,228.2188 2466.0625,230.3125 Q2466.0625,232.4063 2466.75,233.4844 Q2467.4375,234.5469 2468.7813,234.5469 Q2469.4063,234.5469 2470,234.2813 Q2470.5938,234 2471.2188,233.4219 L2471.2188,236.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="2488.75" y="234.6543">CosScanner</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2259" x2="2761" y1="246.5" y2="246.5"/><ellipse cx="2269" cy="257.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="178" x="2278" y="260.7104">HEARTBEAT_INTERVAL_MS: long</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2259" x2="2761" y1="267.3047" y2="267.3047"/><ellipse cx="2269" cy="278.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="478" x="2278" y="281.5151">CosScanner(COSClient, Collection&lt;String&gt;, DataAccess, Set&lt;FileType&gt;, String, int)</text><ellipse cx="2269" cy="291.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2278" y="294.3198">init(): void</text><ellipse cx="2269" cy="303.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2278" y="307.1245">signalStop(): void</text><ellipse cx="2269" cy="316.7188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2278" y="319.9292">waitForStop(): void</text><ellipse cx="2269" cy="329.5234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2278" y="332.7339">mainLoop(): void</text><polygon fill="#FFFF44" points="2269,337.3281,2273,341.3281,2269,345.3281,2265,341.3281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2278" y="345.5386">safeSleep(long): void</text><polygon fill="#FFFF44" points="2269,350.1328,2273,354.1328,2269,358.1328,2265,354.1328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="2278" y="358.3433">scan(): void</text><polygon fill="#FFFF44" points="2269,362.9375,2273,366.9375,2269,370.9375,2265,366.9375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="145" x="2278" y="371.1479">fileTyper(String): FileType</text><polygon fill="#FFFF44" points="2269,375.7422,2273,379.7422,2269,383.7422,2265,379.7422" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="2278" y="383.9526">handle(CosItem): void</text><polygon fill="#FFFF44" points="2269,388.5469,2273,392.5469,2269,396.5469,2265,392.5469" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2278" y="396.7573">heartbeat(): void</text></a><!--MD5=[0e3cd8e43eee1ca12f784a2afaf30c31]
class com.ibm.fhir.bucket.scanner.DataAccess--><a href="DataAccess.html" target="_top" title="DataAccess.html" xlink:actuate="onRequest" xlink:href="DataAccess.html" xlink:show="new" xlink:title="DataAccess.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="201.6563" id="com.ibm.fhir.bucket.scanner.DataAccess" style="stroke: #A80036; stroke-width: 1.5;" width="507" x="2797.5" y="208"/><ellipse cx="3009.75" cy="224" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3012.7188,229.6406 Q3012.1406,229.9375 3011.5,230.0781 Q3010.8594,230.2344 3010.1563,230.2344 Q3007.6563,230.2344 3006.3281,228.5938 Q3005.0156,226.9375 3005.0156,223.8125 Q3005.0156,220.6875 3006.3281,219.0313 Q3007.6563,217.375 3010.1563,217.375 Q3010.8594,217.375 3011.5,217.5313 Q3012.1563,217.6875 3012.7188,217.9844 L3012.7188,220.7031 Q3012.0938,220.125 3011.5,219.8594 Q3010.9063,219.5781 3010.2813,219.5781 Q3008.9375,219.5781 3008.25,220.6563 Q3007.5625,221.7188 3007.5625,223.8125 Q3007.5625,225.9063 3008.25,226.9844 Q3008.9375,228.0469 3010.2813,228.0469 Q3010.9063,228.0469 3011.5,227.7813 Q3012.0938,227.5 3012.7188,226.9219 L3012.7188,229.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="3030.25" y="228.1543">DataAccess</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2798.5" x2="3303.5" y1="240" y2="240"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2798.5" x2="3303.5" y1="248" y2="248"/><ellipse cx="2808.5" cy="259" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="2817.5" y="262.2104">DataAccess(IDatabaseAdapter, ITransactionProvider, String)</text><ellipse cx="2808.5" cy="271.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2817.5" y="275.0151">init(): void</text><ellipse cx="2808.5" cy="284.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="2817.5" y="287.8198">registerBucketItem(CosItem): void</text><ellipse cx="2808.5" cy="297.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="481" x="2817.5" y="300.6245">allocateJobs(List&lt;BucketLoaderJob&gt;, FileType, int, int, Collection&lt;BucketPath&gt;): void</text><ellipse cx="2808.5" cy="310.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="2817.5" y="313.4292">recordLogicalId(String, String, long, int, Integer): void</text><ellipse cx="2808.5" cy="323.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2817.5" y="326.2339">heartbeat(): void</text><ellipse cx="2808.5" cy="335.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2817.5" y="339.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2808.5" cy="348.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="340" x="2817.5" y="351.8433">recordLogicalIds(long, int, List&lt;ResourceIdValue&gt;, int): void</text><ellipse cx="2808.5" cy="361.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="2817.5" y="364.6479">recordErrors(long, int, List&lt;ResourceBundleError&gt;): void</text><ellipse cx="2808.5" cy="374.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="272" x="2817.5" y="377.4526">getLastProcessedLineNumber(long, int): Integer</text><ellipse cx="2808.5" cy="387.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="2817.5" y="390.2573">getResourceRefsForLine(long, int, int): List&lt;ResourceRef&gt;</text><ellipse cx="2808.5" cy="399.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="2817.5" y="403.062">selectRandomPatientIds(List&lt;String&gt;, int): void</text></a><!--MD5=[2c04570401409e9b33aaf4ae35bd3a5d]
class com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><a href="BundleBreakerResourceProcessor.html" target="_top" title="BundleBreakerResourceProcessor.html" xlink:actuate="onRequest" xlink:href="BundleBreakerResourceProcessor.html" xlink:show="new" xlink:title="BundleBreakerResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="112.0234" id="com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="392" x="888" y="253"/><ellipse cx="972.75" cy="269" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M975.7188,274.6406 Q975.1406,274.9375 974.5,275.0781 Q973.8594,275.2344 973.1563,275.2344 Q970.6563,275.2344 969.3281,273.5938 Q968.0156,271.9375 968.0156,268.8125 Q968.0156,265.6875 969.3281,264.0313 Q970.6563,262.375 973.1563,262.375 Q973.8594,262.375 974.5,262.5313 Q975.1563,262.6875 975.7188,262.9844 L975.7188,265.7031 Q975.0938,265.125 974.5,264.8594 Q973.9063,264.5781 973.2813,264.5781 Q971.9375,264.5781 971.25,265.6563 Q970.5625,266.7188 970.5625,268.8125 Q970.5625,270.9063 971.25,271.9844 Q971.9375,273.0469 973.2813,273.0469 Q973.9063,273.0469 974.5,272.7813 Q975.0938,272.5 975.7188,271.9219 L975.7188,274.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="214" x="993.25" y="273.1543">BundleBreakerResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="889" x2="1279" y1="285" y2="285"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="889" x2="1279" y1="293" y2="293"/><ellipse cx="899" cy="304" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="366" x="908" y="307.2104">BundleBreakerResourceProcessor(COSClient, int, String, String)</text><ellipse cx="899" cy="316.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="908" y="320.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="899,324.6094,903,328.6094,899,332.6094,895,328.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="908" y="332.8198">process(String, Bundle): void</text><polygon fill="#FFFF44" points="899,337.4141,903,341.4141,899,345.4141,895,341.4141" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="908" y="345.6245">saveBundle(String, Bundle, int): void</text><polygon fill="#FFFF44" points="899,350.2188,903,354.2188,899,358.2188,895,354.2188" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="908" y="358.4292">writeBundle(Bundle, String): void</text></a><!--MD5=[5da28120c68ca992e1f1d65bc7d035a4]
class com.ibm.fhir.bucket.scanner.LoaderQueue--><a href="LoaderQueue.html" target="_top" title="LoaderQueue.html" xlink:actuate="onRequest" xlink:href="LoaderQueue.html" xlink:show="new" xlink:title="LoaderQueue.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="60.8047" id="com.ibm.fhir.bucket.scanner.LoaderQueue" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="2166" y="527.5"/><ellipse cx="2226.75" cy="543.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2222.6719,539.2656 L2222.6719,537.1094 L2230.0625,537.1094 L2230.0625,539.2656 L2227.5938,539.2656 L2227.5938,547.3438 L2230.0625,547.3438 L2230.0625,549.5 L2222.6719,549.5 L2222.6719,547.3438 L2225.1406,547.3438 L2225.1406,539.2656 L2222.6719,539.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="2247.25" y="547.6543">LoaderQueue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2167" x2="2379" y1="559.5" y2="559.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2167" x2="2379" y1="567.5" y2="567.5"/><ellipse cx="2177" cy="578.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="2186" y="581.7104">processEntry(String, String): void</text></a><!--MD5=[768677c16d4a67509cbd4114396ece65]
class com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><a href="FHIRClientResourceProcessor.html" target="_top" title="FHIRClientResourceProcessor.html" xlink:actuate="onRequest" xlink:href="FHIRClientResourceProcessor.html" xlink:show="new" xlink:title="FHIRClientResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="86.4141" id="com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="469" y="266"/><ellipse cx="564.75" cy="282" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M567.7188,287.6406 Q567.1406,287.9375 566.5,288.0781 Q565.8594,288.2344 565.1563,288.2344 Q562.6563,288.2344 561.3281,286.5938 Q560.0156,284.9375 560.0156,281.8125 Q560.0156,278.6875 561.3281,277.0313 Q562.6563,275.375 565.1563,275.375 Q565.8594,275.375 566.5,275.5313 Q567.1563,275.6875 567.7188,275.9844 L567.7188,278.7031 Q567.0938,278.125 566.5,277.8594 Q565.9063,277.5781 565.2813,277.5781 Q563.9375,277.5781 563.25,278.6563 Q562.5625,279.7188 562.5625,281.8125 Q562.5625,283.9063 563.25,284.9844 Q563.9375,286.0469 565.2813,286.0469 Q565.9063,286.0469 566.5,285.7813 Q567.0938,285.5 567.7188,284.9219 L567.7188,287.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="184" x="585.25" y="286.1543">FHIRClientResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="470" x2="852" y1="298" y2="298"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="470" x2="852" y1="306" y2="306"/><ellipse cx="480" cy="317" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="343" x="489" y="320.2104">FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)</text><ellipse cx="480" cy="329.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="489" y="333.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="480,337.6094,484,341.6094,480,345.6094,476,341.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="489" y="345.8198">processBadRequest(ResourceEntry, FhirServerResponse): void</text></a><!--MD5=[dbdff8a2fae6c321988998aab8ea5b0a]
class com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><a href="Sha256InputStreamDecorator.html" target="_top" title="Sha256InputStreamDecorator.html" xlink:actuate="onRequest" xlink:href="Sha256InputStreamDecorator.html" xlink:show="new" xlink:title="Sha256InputStreamDecorator.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="112.0234" id="com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="1315.5" y="253"/><ellipse cx="1354.35" cy="269" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1357.3188,274.6406 Q1356.7406,274.9375 1356.1,275.0781 Q1355.4594,275.2344 1354.7563,275.2344 Q1352.2563,275.2344 1350.9281,273.5938 Q1349.6156,271.9375 1349.6156,268.8125 Q1349.6156,265.6875 1350.9281,264.0313 Q1352.2563,262.375 1354.7563,262.375 Q1355.4594,262.375 1356.1,262.5313 Q1356.7563,262.6875 1357.3188,262.9844 L1357.3188,265.7031 Q1356.6938,265.125 1356.1,264.8594 Q1355.5063,264.5781 1354.8813,264.5781 Q1353.5375,264.5781 1352.85,265.6563 Q1352.1625,266.7188 1352.1625,268.8125 Q1352.1625,270.9063 1352.85,271.9844 Q1353.5375,273.0469 1354.8813,273.0469 Q1355.5063,273.0469 1356.1,272.7813 Q1356.6938,272.5 1357.3188,271.9219 L1357.3188,274.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="188" x="1373.65" y="273.1543">Sha256InputStreamDecorator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1316.5" x2="1587.5" y1="285" y2="285"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1316.5" x2="1587.5" y1="293" y2="293"/><ellipse cx="1326.5" cy="304" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="1335.5" y="307.2104">Sha256InputStreamDecorator(InputStream)</text><ellipse cx="1326.5" cy="316.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="1335.5" y="320.0151">getBase64Hash(): String</text><ellipse cx="1326.5" cy="329.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1335.5" y="332.8198">read(): int</text><ellipse cx="1326.5" cy="342.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1335.5" y="345.6245">read(byte[], int, int): int</text><ellipse cx="1326.5" cy="355.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="1335.5" y="358.4292">close(): void</text></a><!--MD5=[a45591fc44653b32084f6c40df0854b1]
class com.ibm.fhir.bucket.scanner.COSReader--><a href="COSReader.html" target="_top" title="COSReader.html" xlink:actuate="onRequest" xlink:href="COSReader.html" xlink:show="new" xlink:title="COSReader.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="176.0469" id="com.ibm.fhir.bucket.scanner.COSReader" style="stroke: #A80036; stroke-width: 1.5;" width="890" x="2415" y="470"/><ellipse cx="2820.75" cy="486" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2823.7188,491.6406 Q2823.1406,491.9375 2822.5,492.0781 Q2821.8594,492.2344 2821.1563,492.2344 Q2818.6563,492.2344 2817.3281,490.5938 Q2816.0156,488.9375 2816.0156,485.8125 Q2816.0156,482.6875 2817.3281,481.0313 Q2818.6563,479.375 2821.1563,479.375 Q2821.8594,479.375 2822.5,479.5313 Q2823.1563,479.6875 2823.7188,479.9844 L2823.7188,482.7031 Q2823.0938,482.125 2822.5,481.8594 Q2821.9063,481.5781 2821.2813,481.5781 Q2819.9375,481.5781 2819.25,482.6563 Q2818.5625,483.7188 2818.5625,485.8125 Q2818.5625,487.9063 2819.25,488.9844 Q2819.9375,490.0469 2821.2813,490.0469 Q2821.9063,490.0469 2822.5,489.7813 Q2823.0938,489.5 2823.7188,488.9219 L2823.7188,491.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="2841.25" y="490.1543">COSReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2416" x2="3304" y1="502" y2="502"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2416" x2="3304" y1="510" y2="510"/><ellipse cx="2426" cy="521" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="864" x="2435" y="524.2104">COSReader(ExecutorService, FileType, COSClient, Consumer&lt;ResourceEntry&gt;, int, DataAccess, boolean, int, boolean, double, Collection&lt;BucketPath&gt;)</text><ellipse cx="2426" cy="533.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2435" y="537.0151">signalStop(): void</text><ellipse cx="2426" cy="546.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2435" y="549.8198">waitForStop(): void</text><ellipse cx="2426" cy="559.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2435" y="562.6245">init(): void</text><ellipse cx="2426" cy="572.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="2435" y="575.4292">mainAllocationLoop(): void</text><polygon fill="#FFFF44" points="2426,580.0234,2430,584.0234,2426,588.0234,2422,584.0234" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2435" y="588.2339">safeSleep(long): void</text><polygon fill="#FFFF44" points="2426,592.8281,2430,596.8281,2426,600.8281,2422,596.8281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2435" y="601.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2426" cy="610.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="320" x="2435" y="613.8433">processNDJSON(BucketLoaderJob, BufferedReader): void</text><polygon fill="#FFFF44" points="2426,618.4375,2430,622.4375,2426,626.4375,2422,622.4375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="326" x="2435" y="626.6479">process(BucketLoaderJob, Resource, int, String): boolean</text><ellipse cx="2426" cy="636.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="2435" y="639.4526">validateInput(Resource): List&lt;Issue&gt;</text></a><!--MD5=[434e0b04adee20dec453537cb4a35e44]
class com.ibm.fhir.bucket.scanner.NoCloseInputStream--><a href="NoCloseInputStream.html" target="_top" title="NoCloseInputStream.html" xlink:actuate="onRequest" xlink:href="NoCloseInputStream.html" xlink:show="new" xlink:title="NoCloseInputStream.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="73.6094" id="com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="1623.5" y="272"/><ellipse cx="1665.95" cy="288" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1668.9188,293.6406 Q1668.3406,293.9375 1667.7,294.0781 Q1667.0594,294.2344 1666.3563,294.2344 Q1663.8563,294.2344 1662.5281,292.5938 Q1661.2156,290.9375 1661.2156,287.8125 Q1661.2156,284.6875 1662.5281,283.0313 Q1663.8563,281.375 1666.3563,281.375 Q1667.0594,281.375 1667.7,281.5313 Q1668.3563,281.6875 1668.9188,281.9844 L1668.9188,284.7031 Q1668.2938,284.125 1667.7,283.8594 Q1667.1063,283.5781 1666.4813,283.5781 Q1665.1375,283.5781 1664.45,284.6563 Q1663.7625,285.7188 1663.7625,287.8125 Q1663.7625,289.9063 1664.45,290.9844 Q1665.1375,292.0469 1666.4813,292.0469 Q1667.1063,292.0469 1667.7,291.7813 Q1668.2938,291.5 1668.9188,290.9219 L1668.9188,293.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="1686.05" y="292.1543">NoCloseInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1624.5" x2="1843.5" y1="304" y2="304"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1624.5" x2="1843.5" y1="312" y2="312"/><ellipse cx="1634.5" cy="323" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="1643.5" y="326.2104">NoCloseInputStream(InputStream)</text><ellipse cx="1634.5" cy="335.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="1643.5" y="339.0151">close(): void</text></a><!--MD5=[e1a4af336e160f27c55bcbc5171d2cfa]
class com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><a href="IdReferenceMappingVisitor.html" target="_top" title="IdReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="IdReferenceMappingVisitor.html" xlink:show="new" xlink:title="IdReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="86.4141" id="com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="343" x="1879.5" y="266"/><ellipse cx="1963.25" cy="282" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1966.2188,287.6406 Q1965.6406,287.9375 1965,288.0781 Q1964.3594,288.2344 1963.6563,288.2344 Q1961.1563,288.2344 1959.8281,286.5938 Q1958.5156,284.9375 1958.5156,281.8125 Q1958.5156,278.6875 1959.8281,277.0313 Q1961.1563,275.375 1963.6563,275.375 Q1964.3594,275.375 1965,275.5313 Q1965.6563,275.6875 1966.2188,275.9844 L1966.2188,278.7031 Q1965.5938,278.125 1965,277.8594 Q1964.4063,277.5781 1963.7813,277.5781 Q1962.4375,277.5781 1961.75,278.6563 Q1961.0625,279.7188 1961.0625,281.8125 Q1961.0625,283.9063 1961.75,284.9844 Q1962.4375,286.0469 1963.7813,286.0469 Q1964.4063,286.0469 1965,285.7813 Q1965.5938,285.5 1966.2188,284.9219 L1966.2188,287.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="1983.75" y="286.1543">IdReferenceMappingVisitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1880.5" x2="2221.5" y1="298" y2="298"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1880.5" x2="2221.5" y1="306" y2="306"/><ellipse cx="1890.5" cy="317" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="317" x="1899.5" y="320.2104">IdReferenceMappingVisitor(Map&lt;String, String&gt;, String)</text><ellipse cx="1890.5" cy="329.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="1899.5" y="333.0151">visit(String, int, Resource): boolean</text><ellipse cx="1890.5" cy="342.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="1899.5" y="345.8198">visit(String, int, DomainResource): boolean</text></a><!--MD5=[5722a3d6808db9ca982f2598f0d72edd]
class com.ibm.fhir.bucket.api.IResourceHandler--><a href="../api/IResourceHandler.html" target="_top" title="../api/IResourceHandler.html" xlink:actuate="onRequest" xlink:href="../api/IResourceHandler.html" xlink:show="new" xlink:title="../api/IResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="315" y="65.5"/><ellipse cx="362.25" cy="81.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M358.1719,77.2656 L358.1719,75.1094 L365.5625,75.1094 L365.5625,77.2656 L363.0938,77.2656 L363.0938,85.3438 L365.5625,85.3438 L365.5625,87.5 L358.1719,87.5 L358.1719,85.3438 L360.6406,85.3438 L360.6406,77.2656 L358.1719,77.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="382.75" y="85.6543">IResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="528" y1="97.5" y2="97.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="528" y1="105.5" y2="105.5"/><ellipse cx="326" cy="116.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="335" y="119.7104">process(ResourceEntry): boolean</text></a><!--MD5=[2367946adcfdd070486357efec45442a]
class com.ibm.fhir.bucket.api.IResourceEntryProcessor--><a href="../api/IResourceEntryProcessor.html" target="_top" title="../api/IResourceEntryProcessor.html" xlink:actuate="onRequest" xlink:href="../api/IResourceEntryProcessor.html" xlink:show="new" xlink:title="../api/IResourceEntryProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="564.5" y="65.5"/><ellipse cx="582.2" cy="81.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M578.1219,77.2656 L578.1219,75.1094 L585.5125,75.1094 L585.5125,77.2656 L583.0438,77.2656 L583.0438,85.3438 L585.5125,85.3438 L585.5125,87.5 L578.1219,87.5 L578.1219,85.3438 L580.5906,85.3438 L580.5906,77.2656 L578.1219,77.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="155" x="596.8" y="85.6543">IResourceEntryProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="565.5" x2="756.5" y1="97.5" y2="97.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="565.5" x2="756.5" y1="105.5" y2="105.5"/><ellipse cx="575.5" cy="116.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="584.5" y="119.7104">process(ResourceEntry): void</text></a><!--MD5=[fa9a3b769145f837d7bc2faadf88dde7]
class java.io.InputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="60.8047" id="java.io.InputStream" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="1450" y="65.5"/><ellipse cx="1465" cy="81.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1465.1094,76.8438 L1463.9531,81.9219 L1466.2813,81.9219 L1465.1094,76.8438 Z M1463.625,74.6094 L1466.6094,74.6094 L1469.9688,87 L1467.5156,87 L1466.75,83.9375 L1463.4688,83.9375 L1462.7188,87 L1460.2813,87 L1463.625,74.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="1479" y="85.6543">InputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1451" x2="1559" y1="97.5" y2="97.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1451" x2="1559" y1="105.5" y2="105.5"/><ellipse cx="1461" cy="116.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="1470" y="119.7104">read(): int</text></a><!--MD5=[7bc894eae69de9994c6e46ebc6cb7767]
class java.io.PushbackInputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="73.6094" id="java.io.PushbackInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="1595" y="59"/><ellipse cx="1610" cy="75" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1612.9688,80.6406 Q1612.3906,80.9375 1611.75,81.0781 Q1611.1094,81.2344 1610.4063,81.2344 Q1607.9063,81.2344 1606.5781,79.5938 Q1605.2656,77.9375 1605.2656,74.8125 Q1605.2656,71.6875 1606.5781,70.0313 Q1607.9063,68.375 1610.4063,68.375 Q1611.1094,68.375 1611.75,68.5313 Q1612.4063,68.6875 1612.9688,68.9844 L1612.9688,71.7031 Q1612.3438,71.125 1611.75,70.8594 Q1611.1563,70.5781 1610.5313,70.5781 Q1609.1875,70.5781 1608.5,71.6563 Q1607.8125,72.7188 1607.8125,74.8125 Q1607.8125,76.9063 1608.5,77.9844 Q1609.1875,79.0469 1610.5313,79.0469 Q1611.1563,79.0469 1611.75,78.7813 Q1612.3438,78.5 1612.9688,77.9219 L1612.9688,80.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="1624" y="79.1543">PushbackInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1596" x2="1764" y1="91" y2="91"/><polygon fill="none" points="1606,97,1610,101,1606,105,1602,101" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="1615" y="105.2104">buf: byte[]</text><polygon fill="none" points="1606,109.8047,1610,113.8047,1606,117.8047,1602,113.8047" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="1615" y="118.0151">pos: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1596" x2="1764" y1="124.6094" y2="124.6094"/></a><!--MD5=[122ab473db8428a74a4b9eae00315f16]
class com.ibm.fhir.model.util.ReferenceMappingVisitor--><a href="../../model/util/ReferenceMappingVisitor.html" target="_top" title="../../model/util/ReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="../../model/util/ReferenceMappingVisitor.html" xlink:show="new" xlink:title="../../model/util/ReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fl5rla86uokq0)" height="48" id="com.ibm.fhir.model.util.ReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="309" x="1896.5" y="72"/><ellipse cx="1911.5" cy="88" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1914.4688,93.6406 Q1913.8906,93.9375 1913.25,94.0781 Q1912.6094,94.2344 1911.9063,94.2344 Q1909.4063,94.2344 1908.0781,92.5938 Q1906.7656,90.9375 1906.7656,87.8125 Q1906.7656,84.6875 1908.0781,83.0313 Q1909.4063,81.375 1911.9063,81.375 Q1912.6094,81.375 1913.25,81.5313 Q1913.9063,81.6875 1914.4688,81.9844 L1914.4688,84.7031 Q1913.8438,84.125 1913.25,83.8594 Q1912.6563,83.5781 1912.0313,83.5781 Q1910.6875,83.5781 1910,84.6563 Q1909.3125,85.7188 1909.3125,87.8125 Q1909.3125,89.9063 1910,90.9844 Q1910.6875,92.0469 1912.0313,92.0469 Q1912.6563,92.0469 1913.25,91.7813 Q1913.8438,91.5 1914.4688,90.9219 L1914.4688,93.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156" x="1925.5" y="92.1543">ReferenceMappingVisitor</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="119" x="2089.5" y="69"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="2090.5" y="81.1387">T extends Visitable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1897.5" x2="2204.5" y1="104" y2="104"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1897.5" x2="2204.5" y1="112" y2="112"/></a><!--MD5=[12bd4cb48c7236030a4f7ce4c8be1d17]
reverse link com.ibm.fhir.bucket.api.IResourceHandler to com.ibm.fhir.bucket.scanner.ResourceHandler--><path d="M382.26,142.08 C351.9,176.53 310.1,223.95 278.96,259.27 " fill="none" id="com.ibm.fhir.bucket.api.IResourceHandler&lt;-com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="377.27,137.16,395.75,126.78,387.77,146.42,377.27,137.16" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e077fa6cee75e7ddad706340d5a422b3]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><path d="M776.7,128.11 C807.99,138.22 841.38,150.61 871,165 C920.88,189.23 972.62,223.71 1012.62,252.75 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="774.53,134.77,757.53,122.11,778.71,121.41,774.53,134.77" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b6bfc2b178dd5439783ec5833e79203b]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><path d="M661,147.03 C661,183.28 661,231.75 661,266 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="654,146.78,661,126.78,668,146.78,654,146.78" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[869ba41b732a6c73c189fc634a550b36]
reverse link java.io.InputStream to com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><path d="M1492.54,146.6 C1484.55,178.42 1474.16,219.77 1465.9,252.66 " fill="none" id="java.io.InputStream&lt;-com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1485.86,144.48,1497.52,126.78,1499.44,147.89,1485.86,144.48" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[99ab7726ceb1317eb372bc9558f40dad]
reverse link java.io.PushbackInputStream to com.ibm.fhir.bucket.scanner.NoCloseInputStream--><path d="M1694.31,152.91 C1703.95,190.58 1716.39,239.18 1724.75,271.85 " fill="none" id="java.io.PushbackInputStream&lt;-com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1687.46,154.38,1689.28,133.27,1701.02,150.91,1687.46,154.38" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[390a4327ac082dbcdf8c6bc63e2f449f]
reverse link com.ibm.fhir.model.util.ReferenceMappingVisitor to com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><path d="M2051,140.49 C2051,177.26 2051,229.61 2051,265.96 " fill="none" id="com.ibm.fhir.model.util.ReferenceMappingVisitor&lt;-com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2044,140.39,2051,120.39,2058,140.39,2044,140.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b179d2cd9dfb3c797d4e7acafd30454d]
link com.ibm.fhir.bucket.scanner.CosScanner to com.ibm.fhir.bucket.scanner.DataAccess--><!--MD5=[1e1b46de5c29adc58c33b52ffc63f7ec]
link com.ibm.fhir.bucket.scanner.CosScanner to com.ibm.fhir.bucket.scanner.LoaderQueue--><!--MD5=[2df4299674349d9baac8763e6dbd7b48]
link com.ibm.fhir.bucket.scanner.LoaderQueue to com.ibm.fhir.bucket.scanner.COSReader--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="186" x="1584.5" y="697.2822">UMLDoclet 2.0.7, PlantUML 1.2019.12</text><!--MD5=[8082367a8492be949fa6f41a2cb34d6b]
@startuml
    namespace com.ibm.fhir.bucket.scanner {

        class ResourceHandler [[ResourceHandler.html]] {
            +ResourceHandler(ExecutorService, int, IResourceEntryProcessor)
            +signalStop(): void
            +waitForStop(): void
            +process(ResourceEntry): boolean
        }

        class CosScanner [[CosScanner.html]] {
            {static} +HEARTBEAT_INTERVAL_MS: long
            +CosScanner(COSClient, Collection<String>, DataAccess, Set<FileType>, String, int)
            +init(): void
            +signalStop(): void
            +waitForStop(): void
            +mainLoop(): void
            #safeSleep(long): void
            #scan(): void
            {static} #fileTyper(String): FileType
            #handle(CosItem): void
            #heartbeat(): void
        }

        class DataAccess [[DataAccess.html]] {
            +DataAccess(IDatabaseAdapter, ITransactionProvider, String)
            +init(): void
            +registerBucketItem(CosItem): void
            +allocateJobs(List<BucketLoaderJob>, FileType, int, int, Collection<BucketPath>): void
            +recordLogicalId(String, String, long, int, Integer): void
            +heartbeat(): void
            +markJobDone(BucketLoaderJob): void
            +recordLogicalIds(long, int, List<ResourceIdValue>, int): void
            +recordErrors(long, int, List<ResourceBundleError>): void
            +getLastProcessedLineNumber(long, int): Integer
            +getResourceRefsForLine(long, int, int): List<ResourceRef>
            +selectRandomPatientIds(List<String>, int): void
        }

        class BundleBreakerResourceProcessor [[BundleBreakerResourceProcessor.html]] {
            +BundleBreakerResourceProcessor(COSClient, int, String, String)
            +process(ResourceEntry): void
            #process(String, Bundle): void
            #saveBundle(String, Bundle, int): void
            #writeBundle(Bundle, String): void
        }

        interface LoaderQueue [[LoaderQueue.html]] {
            {abstract} +processEntry(String, String): void
        }

        class FHIRClientResourceProcessor [[FHIRClientResourceProcessor.html]] {
            +FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)
            +process(ResourceEntry): void
            #processBadRequest(ResourceEntry, FhirServerResponse): void
        }

        class Sha256InputStreamDecorator [[Sha256InputStreamDecorator.html]] {
            +Sha256InputStreamDecorator(InputStream)
            +getBase64Hash(): String
            +read(): int
            +read(byte[], int, int): int
            +close(): void
        }

        class COSReader [[COSReader.html]] {
            +COSReader(ExecutorService, FileType, COSClient, Consumer<ResourceEntry>, int, DataAccess, boolean, int, boolean, double, Collection<BucketPath>)
            +signalStop(): void
            +waitForStop(): void
            +init(): void
            +mainAllocationLoop(): void
            #safeSleep(long): void
            #markJobDone(BucketLoaderJob): void
            +processNDJSON(BucketLoaderJob, BufferedReader): void
            #process(BucketLoaderJob, Resource, int, String): boolean
            +validateInput(Resource): List<Issue>
        }

        class NoCloseInputStream [[NoCloseInputStream.html]] {
            +NoCloseInputStream(InputStream)
            +close(): void
        }

        class IdReferenceMappingVisitor [[IdReferenceMappingVisitor.html]] {
            +IdReferenceMappingVisitor(Map<String, String>, String)
            +visit(String, int, Resource): boolean
            +visit(String, int, DomainResource): boolean
        }

        com.ibm.fhir.bucket.api.IResourceHandler <|.. ResourceHandler
        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. BundleBreakerResourceProcessor
        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. FHIRClientResourceProcessor
        java.io.InputStream <|- - Sha256InputStreamDecorator
        java.io.PushbackInputStream <|- - NoCloseInputStream
        com.ibm.fhir.model.util.ReferenceMappingVisitor <|- - IdReferenceMappingVisitor
    }

    namespace com.ibm.fhir.bucket.api {
        interface IResourceHandler [[../api/IResourceHandler.html]] {
            {abstract} +process(ResourceEntry): boolean
        }
        interface IResourceEntryProcessor [[../api/IResourceEntryProcessor.html]] {
            {abstract} +process(ResourceEntry): void
        }
    }

    namespace java.io {
        abstract class InputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true]] {
            {abstract} +read(): int
        }
        class PushbackInputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true]] {
            #buf: byte[]
            #pos: int
        }
    }

    namespace com.ibm.fhir.model.util {
        class ReferenceMappingVisitor<T extends Visitable> [[../../model/util/ReferenceMappingVisitor.html]] {
        }
    }

    center footer UMLDoclet 2.0.7, PlantUML 1.2019.12
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>