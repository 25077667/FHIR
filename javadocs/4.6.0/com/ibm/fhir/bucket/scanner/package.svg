<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="676px" preserveAspectRatio="none" style="width:3700px;height:676px;" version="1.1" viewBox="0 0 3700 676" width="3700px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dc62hv7ssjc8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b0d9575ab999429b72cc019b4a2a88d8]
cluster com.ibm.fhir.bucket.scanner--><polygon fill="#FFFFFF" filter="url(#f1dc62hv7ssjc8)" points="14,150,246,150,253,172.2969,3678,172.2969,3678,636,14,636,14,150" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="253" y1="172.2969" y2="172.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="18" y="164.9951">com.ibm.fhir.bucket.scanner</text><!--MD5=[0d852700fdad35b7061d461d6907a324]
cluster java.io--><polygon fill="#FFFFFF" filter="url(#f1dc62hv7ssjc8)" points="149,16,205,16,212,38.2969,480,38.2969,480,125,149,125,149,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="149" x2="212" y1="38.2969" y2="38.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="153" y="30.9951">java.io</text><!--MD5=[664a0e6a1e350d8a0a572306d3fcd12d]
cluster com.ibm.fhir.bucket.api--><polygon fill="#FFFFFF" filter="url(#f1dc62hv7ssjc8)" points="855,22.5,1046,22.5,1053,44.7969,1314,44.7969,1314,118.5,855,118.5,855,22.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="855" x2="1053" y1="44.7969" y2="44.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="859" y="37.4951">com.ibm.fhir.bucket.api</text><!--MD5=[30e521c74e295f3874ed3be4488915ed]
cluster com.ibm.fhir.model.util--><polygon fill="#FFFFFF" filter="url(#f1dc62hv7ssjc8)" points="1872,29,2058,29,2065,51.2969,2196,51.2969,2196,112,1872,112,1872,29" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1872" x2="2065" y1="51.2969" y2="51.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="1876" y="43.9951">com.ibm.fhir.model.util</text><!--MD5=[434e0b04adee20dec453537cb4a35e44]
class com.ibm.fhir.bucket.scanner.NoCloseInputStream--><a href="NoCloseInputStream.html" target="_top" title="NoCloseInputStream.html" xlink:actuate="onRequest" xlink:href="NoCloseInputStream.html" xlink:show="new" xlink:title="NoCloseInputStream.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="73.6094" id="com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="330.5" y="234.5"/><ellipse cx="372.95" cy="250.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M375.9188,256.1406 Q375.3406,256.4375 374.7,256.5781 Q374.0594,256.7344 373.3563,256.7344 Q370.8563,256.7344 369.5281,255.0938 Q368.2156,253.4375 368.2156,250.3125 Q368.2156,247.1875 369.5281,245.5313 Q370.8563,243.875 373.3563,243.875 Q374.0594,243.875 374.7,244.0313 Q375.3563,244.1875 375.9188,244.4844 L375.9188,247.2031 Q375.2938,246.625 374.7,246.3594 Q374.1063,246.0781 373.4813,246.0781 Q372.1375,246.0781 371.45,247.1563 Q370.7625,248.2188 370.7625,250.3125 Q370.7625,252.4063 371.45,253.4844 Q372.1375,254.5469 373.4813,254.5469 Q374.1063,254.5469 374.7,254.2813 Q375.2938,254 375.9188,253.4219 L375.9188,256.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="393.05" y="254.6543">NoCloseInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="331.5" x2="550.5" y1="266.5" y2="266.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="331.5" x2="550.5" y1="274.5" y2="274.5"/><ellipse cx="341.5" cy="285.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="350.5" y="288.7104">NoCloseInputStream(InputStream)</text><ellipse cx="341.5" cy="298.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="350.5" y="301.5151">close(): void</text></a><!--MD5=[768677c16d4a67509cbd4114396ece65]
class com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><a href="FHIRClientResourceProcessor.html" target="_top" title="FHIRClientResourceProcessor.html" xlink:actuate="onRequest" xlink:href="FHIRClientResourceProcessor.html" xlink:show="new" xlink:title="FHIRClientResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="86.4141" id="com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="1017" y="228.5"/><ellipse cx="1112.75" cy="244.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1115.7188,250.1406 Q1115.1406,250.4375 1114.5,250.5781 Q1113.8594,250.7344 1113.1563,250.7344 Q1110.6563,250.7344 1109.3281,249.0938 Q1108.0156,247.4375 1108.0156,244.3125 Q1108.0156,241.1875 1109.3281,239.5313 Q1110.6563,237.875 1113.1563,237.875 Q1113.8594,237.875 1114.5,238.0313 Q1115.1563,238.1875 1115.7188,238.4844 L1115.7188,241.2031 Q1115.0938,240.625 1114.5,240.3594 Q1113.9063,240.0781 1113.2813,240.0781 Q1111.9375,240.0781 1111.25,241.1563 Q1110.5625,242.2188 1110.5625,244.3125 Q1110.5625,246.4063 1111.25,247.4844 Q1111.9375,248.5469 1113.2813,248.5469 Q1113.9063,248.5469 1114.5,248.2813 Q1115.0938,248 1115.7188,247.4219 L1115.7188,250.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="184" x="1133.25" y="248.6543">FHIRClientResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1018" x2="1400" y1="260.5" y2="260.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1018" x2="1400" y1="268.5" y2="268.5"/><ellipse cx="1028" cy="279.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="343" x="1037" y="282.7104">FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)</text><ellipse cx="1028" cy="292.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1037" y="295.5151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="1028,300.1094,1032,304.1094,1028,308.1094,1024,304.1094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="1037" y="308.3198">processBadRequest(ResourceEntry, FhirServerResponse): void</text></a><!--MD5=[bb92dc037dab9e7188241d686cc36a7e]
class com.ibm.fhir.bucket.scanner.ResourceHandler--><a href="ResourceHandler.html" target="_top" title="ResourceHandler.html" xlink:actuate="onRequest" xlink:href="ResourceHandler.html" xlink:show="new" xlink:title="ResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="99.2188" id="com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="395" x="586.5" y="222"/><ellipse cx="725.75" cy="238" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M728.7188,243.6406 Q728.1406,243.9375 727.5,244.0781 Q726.8594,244.2344 726.1563,244.2344 Q723.6563,244.2344 722.3281,242.5938 Q721.0156,240.9375 721.0156,237.8125 Q721.0156,234.6875 722.3281,233.0313 Q723.6563,231.375 726.1563,231.375 Q726.8594,231.375 727.5,231.5313 Q728.1563,231.6875 728.7188,231.9844 L728.7188,234.7031 Q728.0938,234.125 727.5,233.8594 Q726.9063,233.5781 726.2813,233.5781 Q724.9375,233.5781 724.25,234.6563 Q723.5625,235.7188 723.5625,237.8125 Q723.5625,239.9063 724.25,240.9844 Q724.9375,242.0469 726.2813,242.0469 Q726.9063,242.0469 727.5,241.7813 Q728.0938,241.5 728.7188,240.9219 L728.7188,243.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="746.25" y="242.1543">ResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="587.5" x2="980.5" y1="254" y2="254"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="587.5" x2="980.5" y1="262" y2="262"/><ellipse cx="597.5" cy="273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="606.5" y="276.2104">ResourceHandler(ExecutorService, int, IResourceEntryProcessor)</text><ellipse cx="597.5" cy="285.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="606.5" y="289.0151">signalStop(): void</text><ellipse cx="597.5" cy="298.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="606.5" y="301.8198">waitForStop(): void</text><ellipse cx="597.5" cy="311.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="606.5" y="314.6245">process(ResourceEntry): boolean</text></a><!--MD5=[117b4744d87af26d6202ac4a9292f012]
class com.ibm.fhir.bucket.scanner.CosScanner--><a href="CosScanner.html" target="_top" title="CosScanner.html" xlink:actuate="onRequest" xlink:href="CosScanner.html" xlink:show="new" xlink:title="CosScanner.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="188.8516" id="com.ibm.fhir.bucket.scanner.CosScanner" style="stroke: #A80036; stroke-width: 1.5;" width="504" x="2241" y="177"/><ellipse cx="2451.25" cy="193" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2454.2188,198.6406 Q2453.6406,198.9375 2453,199.0781 Q2452.3594,199.2344 2451.6563,199.2344 Q2449.1563,199.2344 2447.8281,197.5938 Q2446.5156,195.9375 2446.5156,192.8125 Q2446.5156,189.6875 2447.8281,188.0313 Q2449.1563,186.375 2451.6563,186.375 Q2452.3594,186.375 2453,186.5313 Q2453.6563,186.6875 2454.2188,186.9844 L2454.2188,189.7031 Q2453.5938,189.125 2453,188.8594 Q2452.4063,188.5781 2451.7813,188.5781 Q2450.4375,188.5781 2449.75,189.6563 Q2449.0625,190.7188 2449.0625,192.8125 Q2449.0625,194.9063 2449.75,195.9844 Q2450.4375,197.0469 2451.7813,197.0469 Q2452.4063,197.0469 2453,196.7813 Q2453.5938,196.5 2454.2188,195.9219 L2454.2188,198.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="2471.75" y="197.1543">CosScanner</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2242" x2="2744" y1="209" y2="209"/><ellipse cx="2252" cy="220" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="178" x="2261" y="223.2104">HEARTBEAT_INTERVAL_MS: long</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2242" x2="2744" y1="229.8047" y2="229.8047"/><ellipse cx="2252" cy="240.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="478" x="2261" y="244.0151">CosScanner(COSClient, Collection&lt;String&gt;, DataAccess, Set&lt;FileType&gt;, String, int)</text><ellipse cx="2252" cy="253.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2261" y="256.8198">init(): void</text><ellipse cx="2252" cy="266.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2261" y="269.6245">signalStop(): void</text><ellipse cx="2252" cy="279.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2261" y="282.4292">waitForStop(): void</text><ellipse cx="2252" cy="292.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2261" y="295.2339">mainLoop(): void</text><polygon fill="#FFFF44" points="2252,299.8281,2256,303.8281,2252,307.8281,2248,303.8281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2261" y="308.0386">safeSleep(long): void</text><polygon fill="#FFFF44" points="2252,312.6328,2256,316.6328,2252,320.6328,2248,316.6328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="2261" y="320.8433">scan(): void</text><polygon fill="#FFFF44" points="2252,325.4375,2256,329.4375,2252,333.4375,2248,329.4375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="145" x="2261" y="333.6479">fileTyper(String): FileType</text><polygon fill="#FFFF44" points="2252,338.2422,2256,342.2422,2252,346.2422,2248,342.2422" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="2261" y="346.4526">handle(CosItem): void</text><polygon fill="#FFFF44" points="2252,351.0469,2256,355.0469,2252,359.0469,2248,355.0469" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2261" y="359.2573">heartbeat(): void</text></a><!--MD5=[a45591fc44653b32084f6c40df0854b1]
class com.ibm.fhir.bucket.scanner.COSReader--><a href="COSReader.html" target="_top" title="COSReader.html" xlink:actuate="onRequest" xlink:href="COSReader.html" xlink:show="new" xlink:title="COSReader.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="176.0469" id="com.ibm.fhir.bucket.scanner.COSReader" style="stroke: #A80036; stroke-width: 1.5;" width="890" x="2780" y="183.5"/><ellipse cx="3185.75" cy="199.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3188.7188,205.1406 Q3188.1406,205.4375 3187.5,205.5781 Q3186.8594,205.7344 3186.1563,205.7344 Q3183.6563,205.7344 3182.3281,204.0938 Q3181.0156,202.4375 3181.0156,199.3125 Q3181.0156,196.1875 3182.3281,194.5313 Q3183.6563,192.875 3186.1563,192.875 Q3186.8594,192.875 3187.5,193.0313 Q3188.1563,193.1875 3188.7188,193.4844 L3188.7188,196.2031 Q3188.0938,195.625 3187.5,195.3594 Q3186.9063,195.0781 3186.2813,195.0781 Q3184.9375,195.0781 3184.25,196.1563 Q3183.5625,197.2188 3183.5625,199.3125 Q3183.5625,201.4063 3184.25,202.4844 Q3184.9375,203.5469 3186.2813,203.5469 Q3186.9063,203.5469 3187.5,203.2813 Q3188.0938,203 3188.7188,202.4219 L3188.7188,205.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="3206.25" y="203.6543">COSReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2781" x2="3669" y1="215.5" y2="215.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2781" x2="3669" y1="223.5" y2="223.5"/><ellipse cx="2791" cy="234.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="864" x="2800" y="237.7104">COSReader(ExecutorService, FileType, COSClient, Consumer&lt;ResourceEntry&gt;, int, DataAccess, boolean, int, boolean, double, Collection&lt;BucketPath&gt;)</text><ellipse cx="2791" cy="247.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2800" y="250.5151">signalStop(): void</text><ellipse cx="2791" cy="260.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2800" y="263.3198">waitForStop(): void</text><ellipse cx="2791" cy="272.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2800" y="276.1245">init(): void</text><ellipse cx="2791" cy="285.7188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="2800" y="288.9292">mainAllocationLoop(): void</text><polygon fill="#FFFF44" points="2791,293.5234,2795,297.5234,2791,301.5234,2787,297.5234" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2800" y="301.7339">safeSleep(long): void</text><polygon fill="#FFFF44" points="2791,306.3281,2795,310.3281,2791,314.3281,2787,310.3281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2800" y="314.5386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2791" cy="324.1328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="320" x="2800" y="327.3433">processNDJSON(BucketLoaderJob, BufferedReader): void</text><polygon fill="#FFFF44" points="2791,331.9375,2795,335.9375,2791,339.9375,2787,335.9375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="326" x="2800" y="340.1479">process(BucketLoaderJob, Resource, int, String): boolean</text><ellipse cx="2791" cy="349.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="2800" y="352.9526">validateInput(Resource): List&lt;Issue&gt;</text></a><!--MD5=[2c04570401409e9b33aaf4ae35bd3a5d]
class com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><a href="BundleBreakerResourceProcessor.html" target="_top" title="BundleBreakerResourceProcessor.html" xlink:actuate="onRequest" xlink:href="BundleBreakerResourceProcessor.html" xlink:show="new" xlink:title="BundleBreakerResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="112.0234" id="com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="392" x="1436" y="215.5"/><ellipse cx="1520.75" cy="231.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1523.7188,237.1406 Q1523.1406,237.4375 1522.5,237.5781 Q1521.8594,237.7344 1521.1563,237.7344 Q1518.6563,237.7344 1517.3281,236.0938 Q1516.0156,234.4375 1516.0156,231.3125 Q1516.0156,228.1875 1517.3281,226.5313 Q1518.6563,224.875 1521.1563,224.875 Q1521.8594,224.875 1522.5,225.0313 Q1523.1563,225.1875 1523.7188,225.4844 L1523.7188,228.2031 Q1523.0938,227.625 1522.5,227.3594 Q1521.9063,227.0781 1521.2813,227.0781 Q1519.9375,227.0781 1519.25,228.1563 Q1518.5625,229.2188 1518.5625,231.3125 Q1518.5625,233.4063 1519.25,234.4844 Q1519.9375,235.5469 1521.2813,235.5469 Q1521.9063,235.5469 1522.5,235.2813 Q1523.0938,235 1523.7188,234.4219 L1523.7188,237.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="214" x="1541.25" y="235.6543">BundleBreakerResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1437" x2="1827" y1="247.5" y2="247.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1437" x2="1827" y1="255.5" y2="255.5"/><ellipse cx="1447" cy="266.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="366" x="1456" y="269.7104">BundleBreakerResourceProcessor(COSClient, int, String, String)</text><ellipse cx="1447" cy="279.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1456" y="282.5151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="1447,287.1094,1451,291.1094,1447,295.1094,1443,291.1094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="1456" y="295.3198">process(String, Bundle): void</text><polygon fill="#FFFF44" points="1447,299.9141,1451,303.9141,1447,307.9141,1443,303.9141" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="1456" y="308.1245">saveBundle(String, Bundle, int): void</text><polygon fill="#FFFF44" points="1447,312.7188,1451,316.7188,1447,320.7188,1443,316.7188" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="1456" y="320.9292">writeBundle(Bundle, String): void</text></a><!--MD5=[dbdff8a2fae6c321988998aab8ea5b0a]
class com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><a href="Sha256InputStreamDecorator.html" target="_top" title="Sha256InputStreamDecorator.html" xlink:actuate="onRequest" xlink:href="Sha256InputStreamDecorator.html" xlink:show="new" xlink:title="Sha256InputStreamDecorator.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="112.0234" id="com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="22.5" y="215.5"/><ellipse cx="61.35" cy="231.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M64.3188,237.1406 Q63.7406,237.4375 63.1,237.5781 Q62.4594,237.7344 61.7563,237.7344 Q59.2563,237.7344 57.9281,236.0938 Q56.6156,234.4375 56.6156,231.3125 Q56.6156,228.1875 57.9281,226.5313 Q59.2563,224.875 61.7563,224.875 Q62.4594,224.875 63.1,225.0313 Q63.7563,225.1875 64.3188,225.4844 L64.3188,228.2031 Q63.6938,227.625 63.1,227.3594 Q62.5063,227.0781 61.8813,227.0781 Q60.5375,227.0781 59.85,228.1563 Q59.1625,229.2188 59.1625,231.3125 Q59.1625,233.4063 59.85,234.4844 Q60.5375,235.5469 61.8813,235.5469 Q62.5063,235.5469 63.1,235.2813 Q63.6938,235 64.3188,234.4219 L64.3188,237.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="188" x="80.65" y="235.6543">Sha256InputStreamDecorator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="294.5" y1="247.5" y2="247.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="294.5" y1="255.5" y2="255.5"/><ellipse cx="33.5" cy="266.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="42.5" y="269.7104">Sha256InputStreamDecorator(InputStream)</text><ellipse cx="33.5" cy="279.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="42.5" y="282.5151">getBase64Hash(): String</text><ellipse cx="33.5" cy="292.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="42.5" y="295.3198">read(): int</text><ellipse cx="33.5" cy="304.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="42.5" y="308.1245">read(byte[], int, int): int</text><ellipse cx="33.5" cy="317.7188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="42.5" y="320.9292">close(): void</text></a><!--MD5=[e1a4af336e160f27c55bcbc5171d2cfa]
class com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><a href="IdReferenceMappingVisitor.html" target="_top" title="IdReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="IdReferenceMappingVisitor.html" xlink:show="new" xlink:title="IdReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="86.4141" id="com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="343" x="1862.5" y="228.5"/><ellipse cx="1946.25" cy="244.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1949.2188,250.1406 Q1948.6406,250.4375 1948,250.5781 Q1947.3594,250.7344 1946.6563,250.7344 Q1944.1563,250.7344 1942.8281,249.0938 Q1941.5156,247.4375 1941.5156,244.3125 Q1941.5156,241.1875 1942.8281,239.5313 Q1944.1563,237.875 1946.6563,237.875 Q1947.3594,237.875 1948,238.0313 Q1948.6563,238.1875 1949.2188,238.4844 L1949.2188,241.2031 Q1948.5938,240.625 1948,240.3594 Q1947.4063,240.0781 1946.7813,240.0781 Q1945.4375,240.0781 1944.75,241.1563 Q1944.0625,242.2188 1944.0625,244.3125 Q1944.0625,246.4063 1944.75,247.4844 Q1945.4375,248.5469 1946.7813,248.5469 Q1947.4063,248.5469 1948,248.2813 Q1948.5938,248 1949.2188,247.4219 L1949.2188,250.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="1966.75" y="248.6543">IdReferenceMappingVisitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1863.5" x2="2204.5" y1="260.5" y2="260.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1863.5" x2="2204.5" y1="268.5" y2="268.5"/><ellipse cx="1873.5" cy="279.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="317" x="1882.5" y="282.7104">IdReferenceMappingVisitor(Map&lt;String, String&gt;, String)</text><ellipse cx="1873.5" cy="292.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="1882.5" y="295.5151">visit(String, int, Resource): boolean</text><ellipse cx="1873.5" cy="305.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="1882.5" y="308.3198">visit(String, int, DomainResource): boolean</text></a><!--MD5=[5da28120c68ca992e1f1d65bc7d035a4]
class com.ibm.fhir.bucket.scanner.LoaderQueue--><a href="LoaderQueue.html" target="_top" title="LoaderQueue.html" xlink:actuate="onRequest" xlink:href="LoaderQueue.html" xlink:show="new" xlink:title="LoaderQueue.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="60.8047" id="com.ibm.fhir.bucket.scanner.LoaderQueue" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="2386" y="496.5"/><ellipse cx="2446.75" cy="512.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2442.6719,508.2656 L2442.6719,506.1094 L2450.0625,506.1094 L2450.0625,508.2656 L2447.5938,508.2656 L2447.5938,516.3438 L2450.0625,516.3438 L2450.0625,518.5 L2442.6719,518.5 L2442.6719,516.3438 L2445.1406,516.3438 L2445.1406,508.2656 L2442.6719,508.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="2467.25" y="516.6543">LoaderQueue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2387" x2="2599" y1="528.5" y2="528.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2387" x2="2599" y1="536.5" y2="536.5"/><ellipse cx="2397" cy="547.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="2406" y="550.7104">processEntry(String, String): void</text></a><!--MD5=[0e3cd8e43eee1ca12f784a2afaf30c31]
class com.ibm.fhir.bucket.scanner.DataAccess--><a href="DataAccess.html" target="_top" title="DataAccess.html" xlink:actuate="onRequest" xlink:href="DataAccess.html" xlink:show="new" xlink:title="DataAccess.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="201.6563" id="com.ibm.fhir.bucket.scanner.DataAccess" style="stroke: #A80036; stroke-width: 1.5;" width="507" x="2635.5" y="426"/><ellipse cx="2847.75" cy="442" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2850.7188,447.6406 Q2850.1406,447.9375 2849.5,448.0781 Q2848.8594,448.2344 2848.1563,448.2344 Q2845.6563,448.2344 2844.3281,446.5938 Q2843.0156,444.9375 2843.0156,441.8125 Q2843.0156,438.6875 2844.3281,437.0313 Q2845.6563,435.375 2848.1563,435.375 Q2848.8594,435.375 2849.5,435.5313 Q2850.1563,435.6875 2850.7188,435.9844 L2850.7188,438.7031 Q2850.0938,438.125 2849.5,437.8594 Q2848.9063,437.5781 2848.2813,437.5781 Q2846.9375,437.5781 2846.25,438.6563 Q2845.5625,439.7188 2845.5625,441.8125 Q2845.5625,443.9063 2846.25,444.9844 Q2846.9375,446.0469 2848.2813,446.0469 Q2848.9063,446.0469 2849.5,445.7813 Q2850.0938,445.5 2850.7188,444.9219 L2850.7188,447.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="2868.25" y="446.1543">DataAccess</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2636.5" x2="3141.5" y1="458" y2="458"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2636.5" x2="3141.5" y1="466" y2="466"/><ellipse cx="2646.5" cy="477" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="2655.5" y="480.2104">DataAccess(IDatabaseAdapter, ITransactionProvider, String)</text><ellipse cx="2646.5" cy="489.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2655.5" y="493.0151">init(): void</text><ellipse cx="2646.5" cy="502.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="2655.5" y="505.8198">registerBucketItem(CosItem): void</text><ellipse cx="2646.5" cy="515.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="481" x="2655.5" y="518.6245">allocateJobs(List&lt;BucketLoaderJob&gt;, FileType, int, int, Collection&lt;BucketPath&gt;): void</text><ellipse cx="2646.5" cy="528.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="2655.5" y="531.4292">recordLogicalId(String, String, long, int, Integer): void</text><ellipse cx="2646.5" cy="541.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2655.5" y="544.2339">heartbeat(): void</text><ellipse cx="2646.5" cy="553.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2655.5" y="557.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2646.5" cy="566.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="340" x="2655.5" y="569.8433">recordLogicalIds(long, int, List&lt;ResourceIdValue&gt;, int): void</text><ellipse cx="2646.5" cy="579.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="2655.5" y="582.6479">recordErrors(long, int, List&lt;ResourceBundleError&gt;): void</text><ellipse cx="2646.5" cy="592.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="272" x="2655.5" y="595.4526">getLastProcessedLineNumber(long, int): Integer</text><ellipse cx="2646.5" cy="605.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="2655.5" y="608.2573">getResourceRefsForLine(long, int, int): List&lt;ResourceRef&gt;</text><ellipse cx="2646.5" cy="617.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="2655.5" y="621.062">selectRandomPatientIds(List&lt;String&gt;, int): void</text></a><!--MD5=[7bc894eae69de9994c6e46ebc6cb7767]
class java.io.PushbackInputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="73.6094" id="java.io.PushbackInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="302" y="43"/><ellipse cx="317" cy="59" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M319.9688,64.6406 Q319.3906,64.9375 318.75,65.0781 Q318.1094,65.2344 317.4063,65.2344 Q314.9063,65.2344 313.5781,63.5938 Q312.2656,61.9375 312.2656,58.8125 Q312.2656,55.6875 313.5781,54.0313 Q314.9063,52.375 317.4063,52.375 Q318.1094,52.375 318.75,52.5313 Q319.4063,52.6875 319.9688,52.9844 L319.9688,55.7031 Q319.3438,55.125 318.75,54.8594 Q318.1563,54.5781 317.5313,54.5781 Q316.1875,54.5781 315.5,55.6563 Q314.8125,56.7188 314.8125,58.8125 Q314.8125,60.9063 315.5,61.9844 Q316.1875,63.0469 317.5313,63.0469 Q318.1563,63.0469 318.75,62.7813 Q319.3438,62.5 319.9688,61.9219 L319.9688,64.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="331" y="63.1543">PushbackInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="303" x2="471" y1="75" y2="75"/><polygon fill="none" points="313,81,317,85,313,89,309,85" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="322" y="89.2104">buf: byte[]</text><polygon fill="none" points="313,93.8047,317,97.8047,313,101.8047,309,97.8047" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="322" y="102.0151">pos: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="303" x2="471" y1="108.6094" y2="108.6094"/></a><!--MD5=[fa9a3b769145f837d7bc2faadf88dde7]
class java.io.InputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="60.8047" id="java.io.InputStream" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="157" y="49.5"/><ellipse cx="172" cy="65.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M172.1094,60.8438 L170.9531,65.9219 L173.2813,65.9219 L172.1094,60.8438 Z M170.625,58.6094 L173.6094,58.6094 L176.9688,71 L174.5156,71 L173.75,67.9375 L170.4688,67.9375 L169.7188,71 L167.2813,71 L170.625,58.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="186" y="69.6543">InputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="266" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="266" y1="89.5" y2="89.5"/><ellipse cx="168" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="177" y="103.7104">read(): int</text></a><!--MD5=[2367946adcfdd070486357efec45442a]
class com.ibm.fhir.bucket.api.IResourceEntryProcessor--><a href="../api/IResourceEntryProcessor.html" target="_top" title="../api/IResourceEntryProcessor.html" xlink:actuate="onRequest" xlink:href="../api/IResourceEntryProcessor.html" xlink:show="new" xlink:title="../api/IResourceEntryProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="1112.5" y="49.5"/><ellipse cx="1130.2" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1126.1219,61.2656 L1126.1219,59.1094 L1133.5125,59.1094 L1133.5125,61.2656 L1131.0438,61.2656 L1131.0438,69.3438 L1133.5125,69.3438 L1133.5125,71.5 L1126.1219,71.5 L1126.1219,69.3438 L1128.5906,69.3438 L1128.5906,61.2656 L1126.1219,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="155" x="1144.8" y="69.6543">IResourceEntryProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1113.5" x2="1304.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1113.5" x2="1304.5" y1="89.5" y2="89.5"/><ellipse cx="1123.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="1132.5" y="103.7104">process(ResourceEntry): void</text></a><!--MD5=[5722a3d6808db9ca982f2598f0d72edd]
class com.ibm.fhir.bucket.api.IResourceHandler--><a href="../api/IResourceHandler.html" target="_top" title="../api/IResourceHandler.html" xlink:actuate="onRequest" xlink:href="../api/IResourceHandler.html" xlink:show="new" xlink:title="../api/IResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="863" y="49.5"/><ellipse cx="910.25" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M906.1719,61.2656 L906.1719,59.1094 L913.5625,59.1094 L913.5625,61.2656 L911.0938,61.2656 L911.0938,69.3438 L913.5625,69.3438 L913.5625,71.5 L906.1719,71.5 L906.1719,69.3438 L908.6406,69.3438 L908.6406,61.2656 L906.1719,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="930.75" y="69.6543">IResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="864" x2="1076" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="864" x2="1076" y1="89.5" y2="89.5"/><ellipse cx="874" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="883" y="103.7104">process(ResourceEntry): boolean</text></a><!--MD5=[122ab473db8428a74a4b9eae00315f16]
class com.ibm.fhir.model.util.ReferenceMappingVisitor--><a href="../../model/util/ReferenceMappingVisitor.html" target="_top" title="../../model/util/ReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="../../model/util/ReferenceMappingVisitor.html" xlink:show="new" xlink:title="../../model/util/ReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f1dc62hv7ssjc8)" height="48" id="com.ibm.fhir.model.util.ReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="309" x="1879.5" y="56"/><ellipse cx="1894.5" cy="72" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1897.4688,77.6406 Q1896.8906,77.9375 1896.25,78.0781 Q1895.6094,78.2344 1894.9063,78.2344 Q1892.4063,78.2344 1891.0781,76.5938 Q1889.7656,74.9375 1889.7656,71.8125 Q1889.7656,68.6875 1891.0781,67.0313 Q1892.4063,65.375 1894.9063,65.375 Q1895.6094,65.375 1896.25,65.5313 Q1896.9063,65.6875 1897.4688,65.9844 L1897.4688,68.7031 Q1896.8438,68.125 1896.25,67.8594 Q1895.6563,67.5781 1895.0313,67.5781 Q1893.6875,67.5781 1893,68.6563 Q1892.3125,69.7188 1892.3125,71.8125 Q1892.3125,73.9063 1893,74.9844 Q1893.6875,76.0469 1895.0313,76.0469 Q1895.6563,76.0469 1896.25,75.7813 Q1896.8438,75.5 1897.4688,74.9219 L1897.4688,77.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156" x="1908.5" y="76.1543">ReferenceMappingVisitor</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="119" x="2072.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="2073.5" y="65.1387">T extends Visitable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1880.5" x2="2187.5" y1="88" y2="88"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1880.5" x2="2187.5" y1="96" y2="96"/></a><!--MD5=[99ab7726ceb1317eb372bc9558f40dad]
reverse link java.io.PushbackInputStream to com.ibm.fhir.bucket.scanner.NoCloseInputStream--><path d="M403.045,136.9005 C411.9165,168.3614 422.6882,206.5609 430.4866,234.2165 " fill="none" id="java.io.PushbackInputStream&lt;-com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="396.2307,138.5269,397.5399,117.3777,409.7053,134.7272,396.2307,138.5269" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b6bfc2b178dd5439783ec5833e79203b]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><path d="M1209,130.8081 C1209,161.1964 1209,199.3961 1209,228.3204 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1202.0001,130.7678,1209,110.7678,1216.0001,130.7678,1202.0001,130.7678" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[12bd4cb48c7236030a4f7ce4c8be1d17]
reverse link com.ibm.fhir.bucket.api.IResourceHandler to com.ibm.fhir.bucket.scanner.ResourceHandler--><path d="M925.8421,125.4637 C897.7,154.4379 861.2272,191.9892 832.3137,221.7577 " fill="none" id="com.ibm.fhir.bucket.api.IResourceHandler&lt;-com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="921.1599,120.2373,940.1159,110.7678,931.2026,129.9916,921.1599,120.2373" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e077fa6cee75e7ddad706340d5a422b3]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><path d="M1324.6716,114.0329 C1355.7713,124.4005 1389.0699,136.6316 1419,150 C1460.9808,168.751 1505.4498,193.3052 1542.8358,215.4289 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1322.4844,120.6826,1305.6415,107.825,1326.8264,107.3729,1322.4844,120.6826" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[869ba41b732a6c73c189fc634a550b36]
reverse link java.io.InputStream to com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><path d="M198.0939,130.2457 C190.8642,156.368 182.005,188.3781 174.5492,215.3175 " fill="none" id="java.io.InputStream&lt;-com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="191.4035,128.176,203.4846,110.7678,204.8962,131.9104,191.4035,128.176" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[390a4327ac082dbcdf8c6bc63e2f449f]
reverse link com.ibm.fhir.model.util.ReferenceMappingVisitor to com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><path d="M2034,124.4035 C2034,155.6152 2034,197.1635 2034,228.141 " fill="none" id="com.ibm.fhir.model.util.ReferenceMappingVisitor&lt;-com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2027.0001,124.2536,2034,104.2536,2041.0001,124.2536,2027.0001,124.2536" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8a0ba0b6216e15a1cbc340b359f7ee92]
link com.ibm.fhir.bucket.scanner.CosScanner to com.ibm.fhir.bucket.scanner.COSReader--><!--MD5=[1e1b46de5c29adc58c33b52ffc63f7ec]
link com.ibm.fhir.bucket.scanner.CosScanner to com.ibm.fhir.bucket.scanner.LoaderQueue--><!--MD5=[a96f440b4d66d729671969e863a3e6ff]
link com.ibm.fhir.bucket.scanner.LoaderQueue to com.ibm.fhir.bucket.scanner.DataAccess--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="186" x="1759" y="663.2822">UMLDoclet 2.0.7, PlantUML 1.2019.12</text><!--MD5=[2b77933c8e56b44b1a48540acc5d3fe7]
@startuml
    namespace com.ibm.fhir.bucket.scanner {

        class NoCloseInputStream [[NoCloseInputStream.html]] {
            +NoCloseInputStream(InputStream)
            +close(): void
        }

        class FHIRClientResourceProcessor [[FHIRClientResourceProcessor.html]] {
            +FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)
            +process(ResourceEntry): void
            #processBadRequest(ResourceEntry, FhirServerResponse): void
        }

        class ResourceHandler [[ResourceHandler.html]] {
            +ResourceHandler(ExecutorService, int, IResourceEntryProcessor)
            +signalStop(): void
            +waitForStop(): void
            +process(ResourceEntry): boolean
        }

        class CosScanner [[CosScanner.html]] {
            {static} +HEARTBEAT_INTERVAL_MS: long
            +CosScanner(COSClient, Collection<String>, DataAccess, Set<FileType>, String, int)
            +init(): void
            +signalStop(): void
            +waitForStop(): void
            +mainLoop(): void
            #safeSleep(long): void
            #scan(): void
            {static} #fileTyper(String): FileType
            #handle(CosItem): void
            #heartbeat(): void
        }

        class COSReader [[COSReader.html]] {
            +COSReader(ExecutorService, FileType, COSClient, Consumer<ResourceEntry>, int, DataAccess, boolean, int, boolean, double, Collection<BucketPath>)
            +signalStop(): void
            +waitForStop(): void
            +init(): void
            +mainAllocationLoop(): void
            #safeSleep(long): void
            #markJobDone(BucketLoaderJob): void
            +processNDJSON(BucketLoaderJob, BufferedReader): void
            #process(BucketLoaderJob, Resource, int, String): boolean
            +validateInput(Resource): List<Issue>
        }

        class BundleBreakerResourceProcessor [[BundleBreakerResourceProcessor.html]] {
            +BundleBreakerResourceProcessor(COSClient, int, String, String)
            +process(ResourceEntry): void
            #process(String, Bundle): void
            #saveBundle(String, Bundle, int): void
            #writeBundle(Bundle, String): void
        }

        class Sha256InputStreamDecorator [[Sha256InputStreamDecorator.html]] {
            +Sha256InputStreamDecorator(InputStream)
            +getBase64Hash(): String
            +read(): int
            +read(byte[], int, int): int
            +close(): void
        }

        class IdReferenceMappingVisitor [[IdReferenceMappingVisitor.html]] {
            +IdReferenceMappingVisitor(Map<String, String>, String)
            +visit(String, int, Resource): boolean
            +visit(String, int, DomainResource): boolean
        }

        interface LoaderQueue [[LoaderQueue.html]] {
            {abstract} +processEntry(String, String): void
        }

        class DataAccess [[DataAccess.html]] {
            +DataAccess(IDatabaseAdapter, ITransactionProvider, String)
            +init(): void
            +registerBucketItem(CosItem): void
            +allocateJobs(List<BucketLoaderJob>, FileType, int, int, Collection<BucketPath>): void
            +recordLogicalId(String, String, long, int, Integer): void
            +heartbeat(): void
            +markJobDone(BucketLoaderJob): void
            +recordLogicalIds(long, int, List<ResourceIdValue>, int): void
            +recordErrors(long, int, List<ResourceBundleError>): void
            +getLastProcessedLineNumber(long, int): Integer
            +getResourceRefsForLine(long, int, int): List<ResourceRef>
            +selectRandomPatientIds(List<String>, int): void
        }

        java.io.PushbackInputStream <|- - NoCloseInputStream
        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. FHIRClientResourceProcessor
        com.ibm.fhir.bucket.api.IResourceHandler <|.. ResourceHandler
        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. BundleBreakerResourceProcessor
        java.io.InputStream <|- - Sha256InputStreamDecorator
        com.ibm.fhir.model.util.ReferenceMappingVisitor <|- - IdReferenceMappingVisitor
    }

    namespace java.io {
        class PushbackInputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true]] {
            #buf: byte[]
            #pos: int
        }
        abstract class InputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true]] {
            {abstract} +read(): int
        }
    }

    namespace com.ibm.fhir.bucket.api {
        interface IResourceEntryProcessor [[../api/IResourceEntryProcessor.html]] {
            {abstract} +process(ResourceEntry): void
        }
        interface IResourceHandler [[../api/IResourceHandler.html]] {
            {abstract} +process(ResourceEntry): boolean
        }
    }

    namespace com.ibm.fhir.model.util {
        class ReferenceMappingVisitor<T extends Visitable> [[../../model/util/ReferenceMappingVisitor.html]] {
        }
    }

    center footer UMLDoclet 2.0.7, PlantUML 1.2019.12
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>