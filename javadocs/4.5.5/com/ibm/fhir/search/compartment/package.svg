<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="491px" preserveAspectRatio="none" style="width:1119px;height:491px;" version="1.1" viewBox="0 0 1119 491" width="1119px" zoomAndPan="magnify"><defs><filter height="300%" id="fogm4q9t9tmcl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[631c9c7ca6f162e152c25a275d86ba7e]
cluster com.ibm.fhir.search.compartment--><polygon fill="#FFFFFF" filter="url(#fogm4q9t9tmcl)" points="14,16,287,16,294,38.2969,1097,38.2969,1097,451,14,451,14,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="294" y1="38.2969" y2="38.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="267" x="18" y="30.9951">com.ibm.fhir.search.compartment</text><!--MD5=[97d8f2677e8f65af45fa0528b4570f60]
class com.ibm.fhir.search.compartment.CompartmentUtil--><a href="CompartmentUtil.html" target="_top" title="CompartmentUtil.html" xlink:actuate="onRequest" xlink:href="CompartmentUtil.html" xlink:show="new" xlink:title="CompartmentUtil.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fogm4q9t9tmcl)" height="265.6797" id="com.ibm.fhir.search.compartment.CompartmentUtil" style="stroke: #A80036; stroke-width: 1.5;" width="617" x="22.5" y="43"/><ellipse cx="274.25" cy="59" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M277.2188,64.6406 Q276.6406,64.9375 276,65.0781 Q275.3594,65.2344 274.6563,65.2344 Q272.1563,65.2344 270.8281,63.5938 Q269.5156,61.9375 269.5156,58.8125 Q269.5156,55.6875 270.8281,54.0313 Q272.1563,52.375 274.6563,52.375 Q275.3594,52.375 276,52.5313 Q276.6563,52.6875 277.2188,52.9844 L277.2188,55.7031 Q276.5938,55.125 276,54.8594 Q275.4063,54.5781 274.7813,54.5781 Q273.4375,54.5781 272.75,55.6563 Q272.0625,56.7188 272.0625,58.8125 Q272.0625,60.9063 272.75,61.9844 Q273.4375,63.0469 274.7813,63.0469 Q275.4063,63.0469 276,62.7813 Q276.5938,62.5 277.2188,61.9219 L277.2188,64.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="294.75" y="63.1543">CompartmentUtil</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="638.5" y1="75" y2="75"/><ellipse cx="33.5" cy="86" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="194" x="42.5" y="89.2104">FHIR_PATH_BUNDLE_ENTRY: String</text><ellipse cx="33.5" cy="98.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="103" x="42.5" y="102.0151">RESOURCE: String</text><ellipse cx="33.5" cy="111.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="147" x="42.5" y="114.8198">PARSE_EXCEPTION: String</text><ellipse cx="33.5" cy="124.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="123" x="42.5" y="127.6245">IO_EXCEPTION: String</text><ellipse cx="33.5" cy="137.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="175" x="42.5" y="140.4292">INVALID_COMPARTMENT: String</text><ellipse cx="33.5" cy="150.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="271" x="42.5" y="153.2339">INVALID_COMPARTMENT_AND_RESOURCE: String</text><ellipse cx="33.5" cy="162.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="124" x="42.5" y="166.0386">FROM_STREAM: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="638.5" y1="172.6328" y2="172.6328"/><ellipse cx="33.5" cy="183.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="56" x="42.5" y="186.8433">init(): void</text><ellipse cx="33.5" cy="196.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="549" x="42.5" y="199.6479">buildMaps(Map&lt;String, CompartmentCache&gt;, Map&lt;String, ResourceCompartmentCache&gt;): void</text><ellipse cx="33.5" cy="209.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="591" x="42.5" y="212.4526">buildMaps(String, Map&lt;String, CompartmentCache&gt;, Map&lt;String, ResourceCompartmentCache&gt;): void</text><ellipse cx="33.5" cy="222.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="305" x="42.5" y="225.2573">getCompartmentResourceTypes(String): List&lt;String&gt;</text><ellipse cx="33.5" cy="234.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="432" x="42.5" y="238.062">getCompartmentResourceTypeInclusionCriteria(String, String): List&lt;String&gt;</text><ellipse cx="33.5" cy="247.6563" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="210" x="42.5" y="250.8667">checkValidCompartment(String): void</text><ellipse cx="33.5" cy="260.4609" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="326" x="42.5" y="263.6714">checkValidCompartmentAndResource(String, String): void</text><ellipse cx="33.5" cy="273.2656" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="234" x="42.5" y="276.4761">buildCompositeBundle(PrintStream): void</text><ellipse cx="33.5" cy="286.0703" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="442" x="42.5" y="289.2808">getCompartmentParamsForResourceType(String): Map&lt;String, Set&lt;String&gt;&gt;</text><ellipse cx="33.5" cy="298.875" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="263" x="42.5" y="302.0854">makeCompartmentParamName(String): String</text></a><!--MD5=[8a50672172d4659d4f4f5acbf6ca99eb]
class com.ibm.fhir.search.compartment.CompartmentCache--><a href="CompartmentCache.html" target="_top" title="CompartmentCache.html" xlink:actuate="onRequest" xlink:href="CompartmentCache.html" xlink:show="new" xlink:title="CompartmentCache.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fogm4q9t9tmcl)" height="86.4141" id="com.ibm.fhir.search.compartment.CompartmentCache" style="stroke: #A80036; stroke-width: 1.5;" width="415" x="674.5" y="133"/><ellipse cx="815.75" cy="149" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M818.7188,154.6406 Q818.1406,154.9375 817.5,155.0781 Q816.8594,155.2344 816.1563,155.2344 Q813.6563,155.2344 812.3281,153.5938 Q811.0156,151.9375 811.0156,148.8125 Q811.0156,145.6875 812.3281,144.0313 Q813.6563,142.375 816.1563,142.375 Q816.8594,142.375 817.5,142.5313 Q818.1563,142.6875 818.7188,142.9844 L818.7188,145.7031 Q818.0938,145.125 817.5,144.8594 Q816.9063,144.5781 816.2813,144.5781 Q814.9375,144.5781 814.25,145.6563 Q813.5625,146.7188 813.5625,148.8125 Q813.5625,150.9063 814.25,151.9844 Q814.9375,153.0469 816.2813,153.0469 Q816.9063,153.0469 817.5,152.7813 Q818.0938,152.5 818.7188,151.9219 L818.7188,154.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="124" x="836.25" y="153.1543">CompartmentCache</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="675.5" x2="1088.5" y1="165" y2="165"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="675.5" x2="1088.5" y1="173" y2="173"/><ellipse cx="685.5" cy="184" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="694.5" y="187.2104">add(String, List&lt;String&gt;): void</text><ellipse cx="685.5" cy="196.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="281" x="694.5" y="200.0151">getResourceTypesInCompartment(): List&lt;String&gt;</text><ellipse cx="685.5" cy="209.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="389" x="694.5" y="212.8198">getParametersByResourceTypeInCompartment(String): List&lt;String&gt;</text></a><!--MD5=[1825c0adf0e65267e103ac7d9edf547c]
class com.ibm.fhir.search.compartment.ResourceCompartmentCache--><a href="ResourceCompartmentCache.html" target="_top" title="ResourceCompartmentCache.html" xlink:actuate="onRequest" xlink:href="ResourceCompartmentCache.html" xlink:show="new" xlink:title="ResourceCompartmentCache.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fogm4q9t9tmcl)" height="73.6094" id="com.ibm.fhir.search.compartment.ResourceCompartmentCache" style="stroke: #A80036; stroke-width: 1.5;" width="393" x="134.5" y="369"/><ellipse cx="235.25" cy="385" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M238.2188,390.6406 Q237.6406,390.9375 237,391.0781 Q236.3594,391.2344 235.6563,391.2344 Q233.1563,391.2344 231.8281,389.5938 Q230.5156,387.9375 230.5156,384.8125 Q230.5156,381.6875 231.8281,380.0313 Q233.1563,378.375 235.6563,378.375 Q236.3594,378.375 237,378.5313 Q237.6563,378.6875 238.2188,378.9844 L238.2188,381.7031 Q237.5938,381.125 237,380.8594 Q236.4063,380.5781 235.7813,380.5781 Q234.4375,380.5781 233.75,381.6563 Q233.0625,382.7188 233.0625,384.8125 Q233.0625,386.9063 233.75,387.9844 Q234.4375,389.0469 235.7813,389.0469 Q236.4063,389.0469 237,388.7813 Q237.5938,388.5 238.2188,387.9219 L238.2188,390.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="255.75" y="389.1543">ResourceCompartmentCache</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="135.5" x2="526.5" y1="401" y2="401"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="135.5" x2="526.5" y1="409" y2="409"/><ellipse cx="145.5" cy="420" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="154.5" y="423.2104">add(List&lt;String&gt;, String): void</text><ellipse cx="145.5" cy="432.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="367" x="154.5" y="436.0151">getCompartmentReferenceParams(): Map&lt;String, Set&lt;String&gt;&gt;</text></a><!--MD5=[d740fb221e8cb079bb7776df6e64606e]
link com.ibm.fhir.search.compartment.CompartmentUtil to com.ibm.fhir.search.compartment.CompartmentCache--><!--MD5=[9dd8ff162f70b366e3fcfe9ca485a093]
link com.ibm.fhir.search.compartment.CompartmentUtil to com.ibm.fhir.search.compartment.ResourceCompartmentCache--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="186" x="468.5" y="478.2822">UMLDoclet 2.0.7, PlantUML 1.2019.12</text><!--MD5=[13cd1e44a092193a4bb524c0bfdd0e98]
@startuml
    namespace com.ibm.fhir.search.compartment {

        class CompartmentUtil [[CompartmentUtil.html]] {
            {static} +FHIR_PATH_BUNDLE_ENTRY: String
            {static} +RESOURCE: String
            {static} +PARSE_EXCEPTION: String
            {static} +IO_EXCEPTION: String
            {static} +INVALID_COMPARTMENT: String
            {static} +INVALID_COMPARTMENT_AND_RESOURCE: String
            {static} +FROM_STREAM: String
            {static} +init(): void
            {static} +buildMaps(Map<String, CompartmentCache>, Map<String, ResourceCompartmentCache>): void
            {static} +buildMaps(String, Map<String, CompartmentCache>, Map<String, ResourceCompartmentCache>): void
            {static} +getCompartmentResourceTypes(String): List<String>
            {static} +getCompartmentResourceTypeInclusionCriteria(String, String): List<String>
            {static} +checkValidCompartment(String): void
            {static} +checkValidCompartmentAndResource(String, String): void
            {static} +buildCompositeBundle(PrintStream): void
            {static} +getCompartmentParamsForResourceType(String): Map<String, Set<String>>
            {static} +makeCompartmentParamName(String): String
        }

        class CompartmentCache [[CompartmentCache.html]] {
            +add(String, List<String>): void
            +getResourceTypesInCompartment(): List<String>
            +getParametersByResourceTypeInCompartment(String): List<String>
        }

        class ResourceCompartmentCache [[ResourceCompartmentCache.html]] {
            +add(List<String>, String): void
            +getCompartmentReferenceParams(): Map<String, Set<String>>
        }

    }

    center footer UMLDoclet 2.0.7, PlantUML 1.2019.12
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>