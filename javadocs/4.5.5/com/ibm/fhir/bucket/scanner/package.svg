<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="676px" preserveAspectRatio="none" style="width:3028px;height:676px;" version="1.1" viewBox="0 0 3028 676" width="3028px" zoomAndPan="magnify"><defs><filter height="300%" id="fecml66ap83i0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b0d9575ab999429b72cc019b4a2a88d8]
cluster com.ibm.fhir.bucket.scanner--><polygon fill="#FFFFFF" filter="url(#fecml66ap83i0)" points="14,150,246,150,253,172.2969,3006,172.2969,3006,636,14,636,14,150" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="253" y1="172.2969" y2="172.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="18" y="164.9951">com.ibm.fhir.bucket.scanner</text><!--MD5=[664a0e6a1e350d8a0a572306d3fcd12d]
cluster com.ibm.fhir.bucket.api--><polygon fill="#FFFFFF" filter="url(#fecml66ap83i0)" points="536,22.5,727,22.5,734,44.7969,995,44.7969,995,118.5,536,118.5,536,22.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="536" x2="734" y1="44.7969" y2="44.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="540" y="37.4951">com.ibm.fhir.bucket.api</text><!--MD5=[30e521c74e295f3874ed3be4488915ed]
cluster com.ibm.fhir.model.util--><polygon fill="#FFFFFF" filter="url(#fecml66ap83i0)" points="1308,29,1494,29,1501,51.2969,1632,51.2969,1632,112,1308,112,1308,29" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1308" x2="1501" y1="51.2969" y2="51.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="1312" y="43.9951">com.ibm.fhir.model.util</text><!--MD5=[0d852700fdad35b7061d461d6907a324]
cluster java.io--><polygon fill="#FFFFFF" filter="url(#fecml66ap83i0)" points="1803,16,1859,16,1866,38.2969,2134,38.2969,2134,125,1803,125,1803,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1803" x2="1866" y1="38.2969" y2="38.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="1807" y="30.9951">java.io</text><!--MD5=[2c04570401409e9b33aaf4ae35bd3a5d]
class com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><a href="BundleBreakerResourceProcessor.html" target="_top" title="BundleBreakerResourceProcessor.html" xlink:actuate="onRequest" xlink:href="BundleBreakerResourceProcessor.html" xlink:show="new" xlink:title="BundleBreakerResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="112.0234" id="com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="392" x="22" y="222"/><ellipse cx="106.75" cy="238" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M109.7188,243.6406 Q109.1406,243.9375 108.5,244.0781 Q107.8594,244.2344 107.1563,244.2344 Q104.6563,244.2344 103.3281,242.5938 Q102.0156,240.9375 102.0156,237.8125 Q102.0156,234.6875 103.3281,233.0313 Q104.6563,231.375 107.1563,231.375 Q107.8594,231.375 108.5,231.5313 Q109.1563,231.6875 109.7188,231.9844 L109.7188,234.7031 Q109.0938,234.125 108.5,233.8594 Q107.9063,233.5781 107.2813,233.5781 Q105.9375,233.5781 105.25,234.6563 Q104.5625,235.7188 104.5625,237.8125 Q104.5625,239.9063 105.25,240.9844 Q105.9375,242.0469 107.2813,242.0469 Q107.9063,242.0469 108.5,241.7813 Q109.0938,241.5 109.7188,240.9219 L109.7188,243.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="214" x="127.25" y="242.1543">BundleBreakerResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23" x2="413" y1="254" y2="254"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23" x2="413" y1="262" y2="262"/><ellipse cx="33" cy="273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="366" x="42" y="276.2104">BundleBreakerResourceProcessor(COSClient, int, String, String)</text><ellipse cx="33" cy="285.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="42" y="289.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="33,293.6094,37,297.6094,33,301.6094,29,297.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="42" y="301.8198">process(String, Bundle): void</text><polygon fill="#FFFF44" points="33,306.4141,37,310.4141,33,314.4141,29,310.4141" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="42" y="314.6245">saveBundle(String, Bundle, int): void</text><polygon fill="#FFFF44" points="33,319.2188,37,323.2188,33,327.2188,29,323.2188" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="42" y="327.4292">writeBundle(Bundle, String): void</text></a><!--MD5=[e1a4af336e160f27c55bcbc5171d2cfa]
class com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><a href="IdReferenceMappingVisitor.html" target="_top" title="IdReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="IdReferenceMappingVisitor.html" xlink:show="new" xlink:title="IdReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="86.4141" id="com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="343" x="1298.5" y="235"/><ellipse cx="1382.25" cy="251" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1385.2188,256.6406 Q1384.6406,256.9375 1384,257.0781 Q1383.3594,257.2344 1382.6563,257.2344 Q1380.1563,257.2344 1378.8281,255.5938 Q1377.5156,253.9375 1377.5156,250.8125 Q1377.5156,247.6875 1378.8281,246.0313 Q1380.1563,244.375 1382.6563,244.375 Q1383.3594,244.375 1384,244.5313 Q1384.6563,244.6875 1385.2188,244.9844 L1385.2188,247.7031 Q1384.5938,247.125 1384,246.8594 Q1383.4063,246.5781 1382.7813,246.5781 Q1381.4375,246.5781 1380.75,247.6563 Q1380.0625,248.7188 1380.0625,250.8125 Q1380.0625,252.9063 1380.75,253.9844 Q1381.4375,255.0469 1382.7813,255.0469 Q1383.4063,255.0469 1384,254.7813 Q1384.5938,254.5 1385.2188,253.9219 L1385.2188,256.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="1402.75" y="255.1543">IdReferenceMappingVisitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1299.5" x2="1640.5" y1="267" y2="267"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1299.5" x2="1640.5" y1="275" y2="275"/><ellipse cx="1309.5" cy="286" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="317" x="1318.5" y="289.2104">IdReferenceMappingVisitor(Map&lt;String, String&gt;, String)</text><ellipse cx="1309.5" cy="298.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="1318.5" y="302.0151">visit(String, int, Resource): boolean</text><ellipse cx="1309.5" cy="311.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="1318.5" y="314.8198">visit(String, int, DomainResource): boolean</text></a><!--MD5=[434e0b04adee20dec453537cb4a35e44]
class com.ibm.fhir.bucket.scanner.NoCloseInputStream--><a href="NoCloseInputStream.html" target="_top" title="NoCloseInputStream.html" xlink:actuate="onRequest" xlink:href="NoCloseInputStream.html" xlink:show="new" xlink:title="NoCloseInputStream.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="73.6094" id="com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="1984.5" y="241"/><ellipse cx="2026.95" cy="257" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2029.9188,262.6406 Q2029.3406,262.9375 2028.7,263.0781 Q2028.0594,263.2344 2027.3563,263.2344 Q2024.8563,263.2344 2023.5281,261.5938 Q2022.2156,259.9375 2022.2156,256.8125 Q2022.2156,253.6875 2023.5281,252.0313 Q2024.8563,250.375 2027.3563,250.375 Q2028.0594,250.375 2028.7,250.5313 Q2029.3563,250.6875 2029.9188,250.9844 L2029.9188,253.7031 Q2029.2938,253.125 2028.7,252.8594 Q2028.1063,252.5781 2027.4813,252.5781 Q2026.1375,252.5781 2025.45,253.6563 Q2024.7625,254.7188 2024.7625,256.8125 Q2024.7625,258.9063 2025.45,259.9844 Q2026.1375,261.0469 2027.4813,261.0469 Q2028.1063,261.0469 2028.7,260.7813 Q2029.2938,260.5 2029.9188,259.9219 L2029.9188,262.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="2047.05" y="261.1543">NoCloseInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1985.5" x2="2204.5" y1="273" y2="273"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1985.5" x2="2204.5" y1="281" y2="281"/><ellipse cx="1995.5" cy="292" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="2004.5" y="295.2104">NoCloseInputStream(InputStream)</text><ellipse cx="1995.5" cy="304.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="2004.5" y="308.0151">close(): void</text></a><!--MD5=[5da28120c68ca992e1f1d65bc7d035a4]
class com.ibm.fhir.bucket.scanner.LoaderQueue--><a href="LoaderQueue.html" target="_top" title="LoaderQueue.html" xlink:actuate="onRequest" xlink:href="LoaderQueue.html" xlink:show="new" xlink:title="LoaderQueue.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="60.8047" id="com.ibm.fhir.bucket.scanner.LoaderQueue" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="2241" y="247.5"/><ellipse cx="2301.75" cy="263.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2297.6719,259.2656 L2297.6719,257.1094 L2305.0625,257.1094 L2305.0625,259.2656 L2302.5938,259.2656 L2302.5938,267.3438 L2305.0625,267.3438 L2305.0625,269.5 L2297.6719,269.5 L2297.6719,267.3438 L2300.1406,267.3438 L2300.1406,259.2656 L2297.6719,259.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="2322.25" y="267.6543">LoaderQueue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2242" x2="2454" y1="279.5" y2="279.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2242" x2="2454" y1="287.5" y2="287.5"/><ellipse cx="2252" cy="298.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="2261" y="301.7104">processEntry(String, String): void</text></a><!--MD5=[0e3cd8e43eee1ca12f784a2afaf30c31]
class com.ibm.fhir.bucket.scanner.DataAccess--><a href="DataAccess.html" target="_top" title="DataAccess.html" xlink:actuate="onRequest" xlink:href="DataAccess.html" xlink:show="new" xlink:title="DataAccess.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="201.6563" id="com.ibm.fhir.bucket.scanner.DataAccess" style="stroke: #A80036; stroke-width: 1.5;" width="507" x="2490.5" y="177"/><ellipse cx="2702.75" cy="193" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2705.7188,198.6406 Q2705.1406,198.9375 2704.5,199.0781 Q2703.8594,199.2344 2703.1563,199.2344 Q2700.6563,199.2344 2699.3281,197.5938 Q2698.0156,195.9375 2698.0156,192.8125 Q2698.0156,189.6875 2699.3281,188.0313 Q2700.6563,186.375 2703.1563,186.375 Q2703.8594,186.375 2704.5,186.5313 Q2705.1563,186.6875 2705.7188,186.9844 L2705.7188,189.7031 Q2705.0938,189.125 2704.5,188.8594 Q2703.9063,188.5781 2703.2813,188.5781 Q2701.9375,188.5781 2701.25,189.6563 Q2700.5625,190.7188 2700.5625,192.8125 Q2700.5625,194.9063 2701.25,195.9844 Q2701.9375,197.0469 2703.2813,197.0469 Q2703.9063,197.0469 2704.5,196.7813 Q2705.0938,196.5 2705.7188,195.9219 L2705.7188,198.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="2723.25" y="197.1543">DataAccess</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2491.5" x2="2996.5" y1="209" y2="209"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2491.5" x2="2996.5" y1="217" y2="217"/><ellipse cx="2501.5" cy="228" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="2510.5" y="231.2104">DataAccess(IDatabaseAdapter, ITransactionProvider, String)</text><ellipse cx="2501.5" cy="240.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2510.5" y="244.0151">init(): void</text><ellipse cx="2501.5" cy="253.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="2510.5" y="256.8198">registerBucketItem(CosItem): void</text><ellipse cx="2501.5" cy="266.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="481" x="2510.5" y="269.6245">allocateJobs(List&lt;BucketLoaderJob&gt;, FileType, int, int, Collection&lt;BucketPath&gt;): void</text><ellipse cx="2501.5" cy="279.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="2510.5" y="282.4292">recordLogicalId(String, String, long, int, Integer): void</text><ellipse cx="2501.5" cy="292.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2510.5" y="295.2339">heartbeat(): void</text><ellipse cx="2501.5" cy="304.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2510.5" y="308.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2501.5" cy="317.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="340" x="2510.5" y="320.8433">recordLogicalIds(long, int, List&lt;ResourceIdValue&gt;, int): void</text><ellipse cx="2501.5" cy="330.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="2510.5" y="333.6479">recordErrors(long, int, List&lt;ResourceBundleError&gt;): void</text><ellipse cx="2501.5" cy="343.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="272" x="2510.5" y="346.4526">getLastProcessedLineNumber(long, int): Integer</text><ellipse cx="2501.5" cy="356.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="2510.5" y="359.2573">getResourceRefsForLine(long, int, int): List&lt;ResourceRef&gt;</text><ellipse cx="2501.5" cy="368.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="2510.5" y="372.062">selectRandomPatientIds(List&lt;String&gt;, int): void</text></a><!--MD5=[bb92dc037dab9e7188241d686cc36a7e]
class com.ibm.fhir.bucket.scanner.ResourceHandler--><a href="ResourceHandler.html" target="_top" title="ResourceHandler.html" xlink:actuate="onRequest" xlink:href="ResourceHandler.html" xlink:show="new" xlink:title="ResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="99.2188" id="com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="395" x="868.5" y="228.5"/><ellipse cx="1007.75" cy="244.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1010.7188,250.1406 Q1010.1406,250.4375 1009.5,250.5781 Q1008.8594,250.7344 1008.1563,250.7344 Q1005.6563,250.7344 1004.3281,249.0938 Q1003.0156,247.4375 1003.0156,244.3125 Q1003.0156,241.1875 1004.3281,239.5313 Q1005.6563,237.875 1008.1563,237.875 Q1008.8594,237.875 1009.5,238.0313 Q1010.1563,238.1875 1010.7188,238.4844 L1010.7188,241.2031 Q1010.0938,240.625 1009.5,240.3594 Q1008.9063,240.0781 1008.2813,240.0781 Q1006.9375,240.0781 1006.25,241.1563 Q1005.5625,242.2188 1005.5625,244.3125 Q1005.5625,246.4063 1006.25,247.4844 Q1006.9375,248.5469 1008.2813,248.5469 Q1008.9063,248.5469 1009.5,248.2813 Q1010.0938,248 1010.7188,247.4219 L1010.7188,250.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="1028.25" y="248.6543">ResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="869.5" x2="1262.5" y1="260.5" y2="260.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="869.5" x2="1262.5" y1="268.5" y2="268.5"/><ellipse cx="879.5" cy="279.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="888.5" y="282.7104">ResourceHandler(ExecutorService, int, IResourceEntryProcessor)</text><ellipse cx="879.5" cy="292.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="888.5" y="295.5151">signalStop(): void</text><ellipse cx="879.5" cy="305.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="888.5" y="308.3198">waitForStop(): void</text><ellipse cx="879.5" cy="317.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="888.5" y="321.1245">process(ResourceEntry): boolean</text></a><!--MD5=[768677c16d4a67509cbd4114396ece65]
class com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><a href="FHIRClientResourceProcessor.html" target="_top" title="FHIRClientResourceProcessor.html" xlink:actuate="onRequest" xlink:href="FHIRClientResourceProcessor.html" xlink:show="new" xlink:title="FHIRClientResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="86.4141" id="com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="449" y="235"/><ellipse cx="544.75" cy="251" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M547.7188,256.6406 Q547.1406,256.9375 546.5,257.0781 Q545.8594,257.2344 545.1563,257.2344 Q542.6563,257.2344 541.3281,255.5938 Q540.0156,253.9375 540.0156,250.8125 Q540.0156,247.6875 541.3281,246.0313 Q542.6563,244.375 545.1563,244.375 Q545.8594,244.375 546.5,244.5313 Q547.1563,244.6875 547.7188,244.9844 L547.7188,247.7031 Q547.0938,247.125 546.5,246.8594 Q545.9063,246.5781 545.2813,246.5781 Q543.9375,246.5781 543.25,247.6563 Q542.5625,248.7188 542.5625,250.8125 Q542.5625,252.9063 543.25,253.9844 Q543.9375,255.0469 545.2813,255.0469 Q545.9063,255.0469 546.5,254.7813 Q547.0938,254.5 547.7188,253.9219 L547.7188,256.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="184" x="565.25" y="255.1543">FHIRClientResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="450" x2="832" y1="267" y2="267"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="450" x2="832" y1="275" y2="275"/><ellipse cx="460" cy="286" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="343" x="469" y="289.2104">FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)</text><ellipse cx="460" cy="298.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="469" y="302.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="460,306.6094,464,310.6094,460,314.6094,456,310.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="469" y="314.8198">processBadRequest(ResourceEntry, FhirServerResponse): void</text></a><!--MD5=[a45591fc44653b32084f6c40df0854b1]
class com.ibm.fhir.bucket.scanner.COSReader--><a href="COSReader.html" target="_top" title="COSReader.html" xlink:actuate="onRequest" xlink:href="COSReader.html" xlink:show="new" xlink:title="COSReader.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="176.0469" id="com.ibm.fhir.bucket.scanner.COSReader" style="stroke: #A80036; stroke-width: 1.5;" width="890" x="1569" y="445.5"/><ellipse cx="1974.75" cy="461.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1977.7188,467.1406 Q1977.1406,467.4375 1976.5,467.5781 Q1975.8594,467.7344 1975.1563,467.7344 Q1972.6563,467.7344 1971.3281,466.0938 Q1970.0156,464.4375 1970.0156,461.3125 Q1970.0156,458.1875 1971.3281,456.5313 Q1972.6563,454.875 1975.1563,454.875 Q1975.8594,454.875 1976.5,455.0313 Q1977.1563,455.1875 1977.7188,455.4844 L1977.7188,458.2031 Q1977.0938,457.625 1976.5,457.3594 Q1975.9063,457.0781 1975.2813,457.0781 Q1973.9375,457.0781 1973.25,458.1563 Q1972.5625,459.2188 1972.5625,461.3125 Q1972.5625,463.4063 1973.25,464.4844 Q1973.9375,465.5469 1975.2813,465.5469 Q1975.9063,465.5469 1976.5,465.2813 Q1977.0938,465 1977.7188,464.4219 L1977.7188,467.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="1995.25" y="465.6543">COSReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1570" x2="2458" y1="477.5" y2="477.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1570" x2="2458" y1="485.5" y2="485.5"/><ellipse cx="1580" cy="496.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="864" x="1589" y="499.7104">COSReader(ExecutorService, FileType, COSClient, Consumer&lt;ResourceEntry&gt;, int, DataAccess, boolean, int, boolean, double, Collection&lt;BucketPath&gt;)</text><ellipse cx="1580" cy="509.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="1589" y="512.5151">signalStop(): void</text><ellipse cx="1580" cy="522.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="1589" y="525.3198">waitForStop(): void</text><ellipse cx="1580" cy="534.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1589" y="538.1245">init(): void</text><ellipse cx="1580" cy="547.7188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="1589" y="550.9292">mainAllocationLoop(): void</text><polygon fill="#FFFF44" points="1580,555.5234,1584,559.5234,1580,563.5234,1576,559.5234" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="1589" y="563.7339">safeSleep(long): void</text><polygon fill="#FFFF44" points="1580,568.3281,1584,572.3281,1580,576.3281,1576,572.3281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="1589" y="576.5386">markJobDone(BucketLoaderJob): void</text><ellipse cx="1580" cy="586.1328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="320" x="1589" y="589.3433">processNDJSON(BucketLoaderJob, BufferedReader): void</text><polygon fill="#FFFF44" points="1580,593.9375,1584,597.9375,1580,601.9375,1576,597.9375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="326" x="1589" y="602.1479">process(BucketLoaderJob, Resource, int, String): boolean</text><ellipse cx="1580" cy="611.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="1589" y="614.9526">validateInput(Resource): List&lt;Issue&gt;</text></a><!--MD5=[117b4744d87af26d6202ac4a9292f012]
class com.ibm.fhir.bucket.scanner.CosScanner--><a href="CosScanner.html" target="_top" title="CosScanner.html" xlink:actuate="onRequest" xlink:href="CosScanner.html" xlink:show="new" xlink:title="CosScanner.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="188.8516" id="com.ibm.fhir.bucket.scanner.CosScanner" style="stroke: #A80036; stroke-width: 1.5;" width="504" x="2494" y="439"/><ellipse cx="2704.25" cy="455" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2707.2188,460.6406 Q2706.6406,460.9375 2706,461.0781 Q2705.3594,461.2344 2704.6563,461.2344 Q2702.1563,461.2344 2700.8281,459.5938 Q2699.5156,457.9375 2699.5156,454.8125 Q2699.5156,451.6875 2700.8281,450.0313 Q2702.1563,448.375 2704.6563,448.375 Q2705.3594,448.375 2706,448.5313 Q2706.6563,448.6875 2707.2188,448.9844 L2707.2188,451.7031 Q2706.5938,451.125 2706,450.8594 Q2705.4063,450.5781 2704.7813,450.5781 Q2703.4375,450.5781 2702.75,451.6563 Q2702.0625,452.7188 2702.0625,454.8125 Q2702.0625,456.9063 2702.75,457.9844 Q2703.4375,459.0469 2704.7813,459.0469 Q2705.4063,459.0469 2706,458.7813 Q2706.5938,458.5 2707.2188,457.9219 L2707.2188,460.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="2724.75" y="459.1543">CosScanner</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2495" x2="2997" y1="471" y2="471"/><ellipse cx="2505" cy="482" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="178" x="2514" y="485.2104">HEARTBEAT_INTERVAL_MS: long</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2495" x2="2997" y1="491.8047" y2="491.8047"/><ellipse cx="2505" cy="502.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="478" x="2514" y="506.0151">CosScanner(COSClient, Collection&lt;String&gt;, DataAccess, Set&lt;FileType&gt;, String, int)</text><ellipse cx="2505" cy="515.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2514" y="518.8198">init(): void</text><ellipse cx="2505" cy="528.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2514" y="531.6245">signalStop(): void</text><ellipse cx="2505" cy="541.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2514" y="544.4292">waitForStop(): void</text><ellipse cx="2505" cy="554.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2514" y="557.2339">mainLoop(): void</text><polygon fill="#FFFF44" points="2505,561.8281,2509,565.8281,2505,569.8281,2501,565.8281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2514" y="570.0386">safeSleep(long): void</text><polygon fill="#FFFF44" points="2505,574.6328,2509,578.6328,2505,582.6328,2501,578.6328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="2514" y="582.8433">scan(): void</text><polygon fill="#FFFF44" points="2505,587.4375,2509,591.4375,2505,595.4375,2501,591.4375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="145" x="2514" y="595.6479">fileTyper(String): FileType</text><polygon fill="#FFFF44" points="2505,600.2422,2509,604.2422,2505,608.2422,2501,604.2422" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="2514" y="608.4526">handle(CosItem): void</text><polygon fill="#FFFF44" points="2505,613.0469,2509,617.0469,2505,621.0469,2501,617.0469" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2514" y="621.2573">heartbeat(): void</text></a><!--MD5=[dbdff8a2fae6c321988998aab8ea5b0a]
class com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><a href="Sha256InputStreamDecorator.html" target="_top" title="Sha256InputStreamDecorator.html" xlink:actuate="onRequest" xlink:href="Sha256InputStreamDecorator.html" xlink:show="new" xlink:title="Sha256InputStreamDecorator.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="112.0234" id="com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="1676.5" y="222"/><ellipse cx="1715.35" cy="238" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1718.3188,243.6406 Q1717.7406,243.9375 1717.1,244.0781 Q1716.4594,244.2344 1715.7563,244.2344 Q1713.2563,244.2344 1711.9281,242.5938 Q1710.6156,240.9375 1710.6156,237.8125 Q1710.6156,234.6875 1711.9281,233.0313 Q1713.2563,231.375 1715.7563,231.375 Q1716.4594,231.375 1717.1,231.5313 Q1717.7563,231.6875 1718.3188,231.9844 L1718.3188,234.7031 Q1717.6938,234.125 1717.1,233.8594 Q1716.5063,233.5781 1715.8813,233.5781 Q1714.5375,233.5781 1713.85,234.6563 Q1713.1625,235.7188 1713.1625,237.8125 Q1713.1625,239.9063 1713.85,240.9844 Q1714.5375,242.0469 1715.8813,242.0469 Q1716.5063,242.0469 1717.1,241.7813 Q1717.6938,241.5 1718.3188,240.9219 L1718.3188,243.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="188" x="1734.65" y="242.1543">Sha256InputStreamDecorator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1677.5" x2="1948.5" y1="254" y2="254"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1677.5" x2="1948.5" y1="262" y2="262"/><ellipse cx="1687.5" cy="273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="1696.5" y="276.2104">Sha256InputStreamDecorator(InputStream)</text><ellipse cx="1687.5" cy="285.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="1696.5" y="289.0151">getBase64Hash(): String</text><ellipse cx="1687.5" cy="298.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1696.5" y="301.8198">read(): int</text><ellipse cx="1687.5" cy="311.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1696.5" y="314.6245">read(byte[], int, int): int</text><ellipse cx="1687.5" cy="324.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="1696.5" y="327.4292">close(): void</text></a><!--MD5=[2367946adcfdd070486357efec45442a]
class com.ibm.fhir.bucket.api.IResourceEntryProcessor--><a href="../api/IResourceEntryProcessor.html" target="_top" title="../api/IResourceEntryProcessor.html" xlink:actuate="onRequest" xlink:href="../api/IResourceEntryProcessor.html" xlink:show="new" xlink:title="../api/IResourceEntryProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="544.5" y="49.5"/><ellipse cx="562.2" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M558.1219,61.2656 L558.1219,59.1094 L565.5125,59.1094 L565.5125,61.2656 L563.0438,61.2656 L563.0438,69.3438 L565.5125,69.3438 L565.5125,71.5 L558.1219,71.5 L558.1219,69.3438 L560.5906,69.3438 L560.5906,61.2656 L558.1219,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="155" x="576.8" y="69.6543">IResourceEntryProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="545.5" x2="736.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="545.5" x2="736.5" y1="89.5" y2="89.5"/><ellipse cx="555.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="564.5" y="103.7104">process(ResourceEntry): void</text></a><!--MD5=[5722a3d6808db9ca982f2598f0d72edd]
class com.ibm.fhir.bucket.api.IResourceHandler--><a href="../api/IResourceHandler.html" target="_top" title="../api/IResourceHandler.html" xlink:actuate="onRequest" xlink:href="../api/IResourceHandler.html" xlink:show="new" xlink:title="../api/IResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="773" y="49.5"/><ellipse cx="820.25" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M816.1719,61.2656 L816.1719,59.1094 L823.5625,59.1094 L823.5625,61.2656 L821.0938,61.2656 L821.0938,69.3438 L823.5625,69.3438 L823.5625,71.5 L816.1719,71.5 L816.1719,69.3438 L818.6406,69.3438 L818.6406,61.2656 L816.1719,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="840.75" y="69.6543">IResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="774" x2="986" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="774" x2="986" y1="89.5" y2="89.5"/><ellipse cx="784" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="793" y="103.7104">process(ResourceEntry): boolean</text></a><!--MD5=[122ab473db8428a74a4b9eae00315f16]
class com.ibm.fhir.model.util.ReferenceMappingVisitor--><a href="../../model/util/ReferenceMappingVisitor.html" target="_top" title="../../model/util/ReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="../../model/util/ReferenceMappingVisitor.html" xlink:show="new" xlink:title="../../model/util/ReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="48" id="com.ibm.fhir.model.util.ReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="309" x="1315.5" y="56"/><ellipse cx="1330.5" cy="72" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1333.4688,77.6406 Q1332.8906,77.9375 1332.25,78.0781 Q1331.6094,78.2344 1330.9063,78.2344 Q1328.4063,78.2344 1327.0781,76.5938 Q1325.7656,74.9375 1325.7656,71.8125 Q1325.7656,68.6875 1327.0781,67.0313 Q1328.4063,65.375 1330.9063,65.375 Q1331.6094,65.375 1332.25,65.5313 Q1332.9063,65.6875 1333.4688,65.9844 L1333.4688,68.7031 Q1332.8438,68.125 1332.25,67.8594 Q1331.6563,67.5781 1331.0313,67.5781 Q1329.6875,67.5781 1329,68.6563 Q1328.3125,69.7188 1328.3125,71.8125 Q1328.3125,73.9063 1329,74.9844 Q1329.6875,76.0469 1331.0313,76.0469 Q1331.6563,76.0469 1332.25,75.7813 Q1332.8438,75.5 1333.4688,74.9219 L1333.4688,77.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156" x="1344.5" y="76.1543">ReferenceMappingVisitor</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="119" x="1508.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="1509.5" y="65.1387">T extends Visitable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1316.5" x2="1623.5" y1="88" y2="88"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1316.5" x2="1623.5" y1="96" y2="96"/></a><!--MD5=[7bc894eae69de9994c6e46ebc6cb7767]
class java.io.PushbackInputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="73.6094" id="java.io.PushbackInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="1956" y="43"/><ellipse cx="1971" cy="59" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1973.9688,64.6406 Q1973.3906,64.9375 1972.75,65.0781 Q1972.1094,65.2344 1971.4063,65.2344 Q1968.9063,65.2344 1967.5781,63.5938 Q1966.2656,61.9375 1966.2656,58.8125 Q1966.2656,55.6875 1967.5781,54.0313 Q1968.9063,52.375 1971.4063,52.375 Q1972.1094,52.375 1972.75,52.5313 Q1973.4063,52.6875 1973.9688,52.9844 L1973.9688,55.7031 Q1973.3438,55.125 1972.75,54.8594 Q1972.1563,54.5781 1971.5313,54.5781 Q1970.1875,54.5781 1969.5,55.6563 Q1968.8125,56.7188 1968.8125,58.8125 Q1968.8125,60.9063 1969.5,61.9844 Q1970.1875,63.0469 1971.5313,63.0469 Q1972.1563,63.0469 1972.75,62.7813 Q1973.3438,62.5 1973.9688,61.9219 L1973.9688,64.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="1985" y="63.1543">PushbackInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1957" x2="2125" y1="75" y2="75"/><polygon fill="none" points="1967,81,1971,85,1967,89,1963,85" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="1976" y="89.2104">buf: byte[]</text><polygon fill="none" points="1967,93.8047,1971,97.8047,1967,101.8047,1963,97.8047" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="1976" y="102.0151">pos: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1957" x2="2125" y1="108.6094" y2="108.6094"/></a><!--MD5=[fa9a3b769145f837d7bc2faadf88dde7]
class java.io.InputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#fecml66ap83i0)" height="60.8047" id="java.io.InputStream" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="1811" y="49.5"/><ellipse cx="1826" cy="65.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1826.1094,60.8438 L1824.9531,65.9219 L1827.2813,65.9219 L1826.1094,60.8438 Z M1824.625,58.6094 L1827.6094,58.6094 L1830.9688,71 L1828.5156,71 L1827.75,67.9375 L1824.4688,67.9375 L1823.7188,71 L1821.2813,71 L1824.625,58.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="1840" y="69.6543">InputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1812" x2="1920" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1812" x2="1920" y1="89.5" y2="89.5"/><ellipse cx="1822" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="1831" y="103.7104">read(): int</text></a><!--MD5=[e077fa6cee75e7ddad706340d5a422b3]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><path d="M525.3497,113.5051 C494.185,123.8882 460.8486,136.2591 431,150 C386.716,170.3863 340.0256,197.7148 301.6816,221.8847 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="523.2384,106.8309,544.4228,107.3025,527.5681,120.1445,523.2384,106.8309" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[390a4327ac082dbcdf8c6bc63e2f449f]
reverse link com.ibm.fhir.model.util.ReferenceMappingVisitor to com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><path d="M1470,124.4537 C1470,157.3918 1470,202.0411 1470,234.701 " fill="none" id="com.ibm.fhir.model.util.ReferenceMappingVisitor&lt;-com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1463.0001,124.2787,1470,104.2787,1477.0001,124.2787,1463.0001,124.2787" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[99ab7726ceb1317eb372bc9558f40dad]
reverse link java.io.PushbackInputStream to com.ibm.fhir.bucket.scanner.NoCloseInputStream--><path d="M2056.5103,136.8711 C2065.6326,170.3196 2076.906,211.6555 2084.8886,240.9247 " fill="none" id="java.io.PushbackInputStream&lt;-com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2049.6661,138.3794,2051.157,117.2423,2063.1728,134.6957,2049.6661,138.3794" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[12bd4cb48c7236030a4f7ce4c8be1d17]
reverse link com.ibm.fhir.bucket.api.IResourceHandler to com.ibm.fhir.bucket.scanner.ResourceHandler--><path d="M922.3965,125.1318 C951.2572,155.8544 989.4661,196.5284 1019.2154,228.197 " fill="none" id="com.ibm.fhir.bucket.api.IResourceHandler&lt;-com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="917.2465,129.8733,908.6549,110.5036,927.4504,120.2878,917.2465,129.8733" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b6bfc2b178dd5439783ec5833e79203b]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><path d="M641,130.6725 C641,162.9425 641,204.2899 641,234.9635 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="634.0001,130.5036,641,110.5036,648.0001,130.5035,634.0001,130.5036" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[869ba41b732a6c73c189fc634a550b36]
reverse link java.io.InputStream to com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><path d="M1852.6401,129.9107 C1845.1395,157.9317 1835.7587,192.9771 1828.0058,221.9405 " fill="none" id="java.io.InputStream&lt;-com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1845.9014,128.0134,1857.8349,110.5036,1859.4253,131.6335,1845.9014,128.0134" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a96f440b4d66d729671969e863a3e6ff]
link com.ibm.fhir.bucket.scanner.LoaderQueue to com.ibm.fhir.bucket.scanner.DataAccess--><!--MD5=[2df4299674349d9baac8763e6dbd7b48]
link com.ibm.fhir.bucket.scanner.LoaderQueue to com.ibm.fhir.bucket.scanner.COSReader--><!--MD5=[80e37125644f517be0e5aa7b49dc8ef9]
link com.ibm.fhir.bucket.scanner.COSReader to com.ibm.fhir.bucket.scanner.CosScanner--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="186" x="1423" y="663.2822">UMLDoclet 2.0.7, PlantUML 1.2019.12</text><!--MD5=[fe355ecfefb437bfcc6cf6e413af4097]
@startuml
    namespace com.ibm.fhir.bucket.scanner {

        class BundleBreakerResourceProcessor [[BundleBreakerResourceProcessor.html]] {
            +BundleBreakerResourceProcessor(COSClient, int, String, String)
            +process(ResourceEntry): void
            #process(String, Bundle): void
            #saveBundle(String, Bundle, int): void
            #writeBundle(Bundle, String): void
        }

        class IdReferenceMappingVisitor [[IdReferenceMappingVisitor.html]] {
            +IdReferenceMappingVisitor(Map<String, String>, String)
            +visit(String, int, Resource): boolean
            +visit(String, int, DomainResource): boolean
        }

        class NoCloseInputStream [[NoCloseInputStream.html]] {
            +NoCloseInputStream(InputStream)
            +close(): void
        }

        interface LoaderQueue [[LoaderQueue.html]] {
            {abstract} +processEntry(String, String): void
        }

        class DataAccess [[DataAccess.html]] {
            +DataAccess(IDatabaseAdapter, ITransactionProvider, String)
            +init(): void
            +registerBucketItem(CosItem): void
            +allocateJobs(List<BucketLoaderJob>, FileType, int, int, Collection<BucketPath>): void
            +recordLogicalId(String, String, long, int, Integer): void
            +heartbeat(): void
            +markJobDone(BucketLoaderJob): void
            +recordLogicalIds(long, int, List<ResourceIdValue>, int): void
            +recordErrors(long, int, List<ResourceBundleError>): void
            +getLastProcessedLineNumber(long, int): Integer
            +getResourceRefsForLine(long, int, int): List<ResourceRef>
            +selectRandomPatientIds(List<String>, int): void
        }

        class ResourceHandler [[ResourceHandler.html]] {
            +ResourceHandler(ExecutorService, int, IResourceEntryProcessor)
            +signalStop(): void
            +waitForStop(): void
            +process(ResourceEntry): boolean
        }

        class FHIRClientResourceProcessor [[FHIRClientResourceProcessor.html]] {
            +FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)
            +process(ResourceEntry): void
            #processBadRequest(ResourceEntry, FhirServerResponse): void
        }

        class COSReader [[COSReader.html]] {
            +COSReader(ExecutorService, FileType, COSClient, Consumer<ResourceEntry>, int, DataAccess, boolean, int, boolean, double, Collection<BucketPath>)
            +signalStop(): void
            +waitForStop(): void
            +init(): void
            +mainAllocationLoop(): void
            #safeSleep(long): void
            #markJobDone(BucketLoaderJob): void
            +processNDJSON(BucketLoaderJob, BufferedReader): void
            #process(BucketLoaderJob, Resource, int, String): boolean
            +validateInput(Resource): List<Issue>
        }

        class CosScanner [[CosScanner.html]] {
            {static} +HEARTBEAT_INTERVAL_MS: long
            +CosScanner(COSClient, Collection<String>, DataAccess, Set<FileType>, String, int)
            +init(): void
            +signalStop(): void
            +waitForStop(): void
            +mainLoop(): void
            #safeSleep(long): void
            #scan(): void
            {static} #fileTyper(String): FileType
            #handle(CosItem): void
            #heartbeat(): void
        }

        class Sha256InputStreamDecorator [[Sha256InputStreamDecorator.html]] {
            +Sha256InputStreamDecorator(InputStream)
            +getBase64Hash(): String
            +read(): int
            +read(byte[], int, int): int
            +close(): void
        }

        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. BundleBreakerResourceProcessor
        com.ibm.fhir.model.util.ReferenceMappingVisitor <|- - IdReferenceMappingVisitor
        java.io.PushbackInputStream <|- - NoCloseInputStream
        com.ibm.fhir.bucket.api.IResourceHandler <|.. ResourceHandler
        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. FHIRClientResourceProcessor
        java.io.InputStream <|- - Sha256InputStreamDecorator
    }

    namespace com.ibm.fhir.bucket.api {
        interface IResourceEntryProcessor [[../api/IResourceEntryProcessor.html]] {
            {abstract} +process(ResourceEntry): void
        }
        interface IResourceHandler [[../api/IResourceHandler.html]] {
            {abstract} +process(ResourceEntry): boolean
        }
    }

    namespace com.ibm.fhir.model.util {
        class ReferenceMappingVisitor<T extends Visitable> [[../../model/util/ReferenceMappingVisitor.html]] {
        }
    }

    namespace java.io {
        class PushbackInputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true]] {
            #buf: byte[]
            #pos: int
        }
        abstract class InputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true]] {
            {abstract} +read(): int
        }
    }

    center footer UMLDoclet 2.0.7, PlantUML 1.2019.12
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>