<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="663px" preserveAspectRatio="none" style="width:3413px;height:663px;" version="1.1" viewBox="0 0 3413 663" width="3413px" zoomAndPan="magnify"><defs><filter height="300%" id="f19zaicnn8a800" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b0d9575ab999429b72cc019b4a2a88d8]
cluster com.ibm.fhir.bucket.scanner--><polygon fill="#FFFFFF" filter="url(#f19zaicnn8a800)" points="14,150,246,150,253,172.2969,3391,172.2969,3391,623,14,623,14,150" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="253" y1="172.2969" y2="172.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="18" y="164.9951">com.ibm.fhir.bucket.scanner</text><!--MD5=[664a0e6a1e350d8a0a572306d3fcd12d]
cluster com.ibm.fhir.bucket.api--><polygon fill="#FFFFFF" filter="url(#f19zaicnn8a800)" points="294,22.5,485,22.5,492,44.7969,754,44.7969,754,118.5,294,118.5,294,22.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="294" x2="492" y1="44.7969" y2="44.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="298" y="37.4951">com.ibm.fhir.bucket.api</text><!--MD5=[0d852700fdad35b7061d461d6907a324]
cluster java.io--><polygon fill="#FFFFFF" filter="url(#f19zaicnn8a800)" points="1426,16,1482,16,1489,38.2969,1757,38.2969,1757,125,1426,125,1426,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1426" x2="1489" y1="38.2969" y2="38.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="1430" y="30.9951">java.io</text><!--MD5=[30e521c74e295f3874ed3be4488915ed]
cluster com.ibm.fhir.model.util--><polygon fill="#FFFFFF" filter="url(#f19zaicnn8a800)" points="1872,29,2058,29,2065,51.2969,2198,51.2969,2198,112,1872,112,1872,29" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1872" x2="2065" y1="51.2969" y2="51.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="1876" y="43.9951">com.ibm.fhir.model.util</text><!--MD5=[5da28120c68ca992e1f1d65bc7d035a4]
class com.ibm.fhir.bucket.scanner.LoaderQueue--><a href="LoaderQueue.html" target="_top" title="LoaderQueue.html" xlink:actuate="onRequest" xlink:href="LoaderQueue.html" xlink:show="new" xlink:title="LoaderQueue.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="60.8047" id="com.ibm.fhir.bucket.scanner.LoaderQueue" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="2242" y="234.5"/><ellipse cx="2303.75" cy="250.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2299.6719,246.2656 L2299.6719,244.1094 L2307.0625,244.1094 L2307.0625,246.2656 L2304.5938,246.2656 L2304.5938,254.3438 L2307.0625,254.3438 L2307.0625,256.5 L2299.6719,256.5 L2299.6719,254.3438 L2302.1406,254.3438 L2302.1406,246.2656 L2299.6719,246.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="2324.25" y="254.6543">LoaderQueue</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2243" x2="2457" y1="266.5" y2="266.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2243" x2="2457" y1="274.5" y2="274.5"/><ellipse cx="2253" cy="285.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="190" x="2262" y="288.7104">processEntry(String, String): void</text></a><!--MD5=[2c04570401409e9b33aaf4ae35bd3a5d]
class com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><a href="BundleBreakerResourceProcessor.html" target="_top" title="BundleBreakerResourceProcessor.html" xlink:actuate="onRequest" xlink:href="BundleBreakerResourceProcessor.html" xlink:show="new" xlink:title="BundleBreakerResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="112.0234" id="com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="392" x="453" y="209"/><ellipse cx="537.75" cy="225" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M540.7188,230.6406 Q540.1406,230.9375 539.5,231.0781 Q538.8594,231.2344 538.1563,231.2344 Q535.6563,231.2344 534.3281,229.5938 Q533.0156,227.9375 533.0156,224.8125 Q533.0156,221.6875 534.3281,220.0313 Q535.6563,218.375 538.1563,218.375 Q538.8594,218.375 539.5,218.5313 Q540.1563,218.6875 540.7188,218.9844 L540.7188,221.7031 Q540.0938,221.125 539.5,220.8594 Q538.9063,220.5781 538.2813,220.5781 Q536.9375,220.5781 536.25,221.6563 Q535.5625,222.7188 535.5625,224.8125 Q535.5625,226.9063 536.25,227.9844 Q536.9375,229.0469 538.2813,229.0469 Q538.9063,229.0469 539.5,228.7813 Q540.0938,228.5 540.7188,227.9219 L540.7188,230.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="214" x="558.25" y="229.1543">BundleBreakerResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="454" x2="844" y1="241" y2="241"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454" x2="844" y1="249" y2="249"/><ellipse cx="464" cy="260" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="366" x="473" y="263.2104">BundleBreakerResourceProcessor(COSClient, int, String, String)</text><ellipse cx="464" cy="272.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="473" y="276.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="464,280.6094,468,284.6094,464,288.6094,460,284.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="473" y="288.8198">process(String, Bundle): void</text><polygon fill="#FFFF44" points="464,293.4141,468,297.4141,464,301.4141,460,297.4141" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="473" y="301.6245">saveBundle(String, Bundle, int): void</text><polygon fill="#FFFF44" points="464,306.2188,468,310.2188,464,314.2188,460,310.2188" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="473" y="314.4292">writeBundle(Bundle, String): void</text></a><!--MD5=[dbdff8a2fae6c321988998aab8ea5b0a]
class com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><a href="Sha256InputStreamDecorator.html" target="_top" title="Sha256InputStreamDecorator.html" xlink:actuate="onRequest" xlink:href="Sha256InputStreamDecorator.html" xlink:show="new" xlink:title="Sha256InputStreamDecorator.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="112.0234" id="com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="1299.5" y="209"/><ellipse cx="1338.35" cy="225" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1341.3188,230.6406 Q1340.7406,230.9375 1340.1,231.0781 Q1339.4594,231.2344 1338.7563,231.2344 Q1336.2563,231.2344 1334.9281,229.5938 Q1333.6156,227.9375 1333.6156,224.8125 Q1333.6156,221.6875 1334.9281,220.0313 Q1336.2563,218.375 1338.7563,218.375 Q1339.4594,218.375 1340.1,218.5313 Q1340.7563,218.6875 1341.3188,218.9844 L1341.3188,221.7031 Q1340.6938,221.125 1340.1,220.8594 Q1339.5063,220.5781 1338.8813,220.5781 Q1337.5375,220.5781 1336.85,221.6563 Q1336.1625,222.7188 1336.1625,224.8125 Q1336.1625,226.9063 1336.85,227.9844 Q1337.5375,229.0469 1338.8813,229.0469 Q1339.5063,229.0469 1340.1,228.7813 Q1340.6938,228.5 1341.3188,227.9219 L1341.3188,230.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="188" x="1357.65" y="229.1543">Sha256InputStreamDecorator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1300.5" x2="1571.5" y1="241" y2="241"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1300.5" x2="1571.5" y1="249" y2="249"/><ellipse cx="1310.5" cy="260" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="1319.5" y="263.2104">Sha256InputStreamDecorator(InputStream)</text><ellipse cx="1310.5" cy="272.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="1319.5" y="276.0151">getBase64Hash(): String</text><ellipse cx="1310.5" cy="285.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1319.5" y="288.8198">read(): int</text><ellipse cx="1310.5" cy="298.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1319.5" y="301.6245">read(byte[], int, int): int</text><ellipse cx="1310.5" cy="311.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="1319.5" y="314.4292">close(): void</text></a><!--MD5=[bb92dc037dab9e7188241d686cc36a7e]
class com.ibm.fhir.bucket.scanner.ResourceHandler--><a href="ResourceHandler.html" target="_top" title="ResourceHandler.html" xlink:actuate="onRequest" xlink:href="ResourceHandler.html" xlink:show="new" xlink:title="ResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="99.2188" id="com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="395" x="22.5" y="215.5"/><ellipse cx="161.75" cy="231.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M164.7188,237.1406 Q164.1406,237.4375 163.5,237.5781 Q162.8594,237.7344 162.1563,237.7344 Q159.6563,237.7344 158.3281,236.0938 Q157.0156,234.4375 157.0156,231.3125 Q157.0156,228.1875 158.3281,226.5313 Q159.6563,224.875 162.1563,224.875 Q162.8594,224.875 163.5,225.0313 Q164.1563,225.1875 164.7188,225.4844 L164.7188,228.2031 Q164.0938,227.625 163.5,227.3594 Q162.9063,227.0781 162.2813,227.0781 Q160.9375,227.0781 160.25,228.1563 Q159.5625,229.2188 159.5625,231.3125 Q159.5625,233.4063 160.25,234.4844 Q160.9375,235.5469 162.2813,235.5469 Q162.9063,235.5469 163.5,235.2813 Q164.0938,235 164.7188,234.4219 L164.7188,237.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="182.25" y="235.6543">ResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="416.5" y1="247.5" y2="247.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="416.5" y1="255.5" y2="255.5"/><ellipse cx="33.5" cy="266.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="42.5" y="269.7104">ResourceHandler(ExecutorService, int, IResourceEntryProcessor)</text><ellipse cx="33.5" cy="279.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="42.5" y="282.5151">signalStop(): void</text><ellipse cx="33.5" cy="292.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="42.5" y="295.3198">waitForStop(): void</text><ellipse cx="33.5" cy="304.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="42.5" y="308.1245">process(ResourceEntry): boolean</text></a><!--MD5=[768677c16d4a67509cbd4114396ece65]
class com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><a href="FHIRClientResourceProcessor.html" target="_top" title="FHIRClientResourceProcessor.html" xlink:actuate="onRequest" xlink:href="FHIRClientResourceProcessor.html" xlink:show="new" xlink:title="FHIRClientResourceProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="86.4141" id="com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="880" y="222"/><ellipse cx="975.75" cy="238" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M978.7188,243.6406 Q978.1406,243.9375 977.5,244.0781 Q976.8594,244.2344 976.1563,244.2344 Q973.6563,244.2344 972.3281,242.5938 Q971.0156,240.9375 971.0156,237.8125 Q971.0156,234.6875 972.3281,233.0313 Q973.6563,231.375 976.1563,231.375 Q976.8594,231.375 977.5,231.5313 Q978.1563,231.6875 978.7188,231.9844 L978.7188,234.7031 Q978.0938,234.125 977.5,233.8594 Q976.9063,233.5781 976.2813,233.5781 Q974.9375,233.5781 974.25,234.6563 Q973.5625,235.7188 973.5625,237.8125 Q973.5625,239.9063 974.25,240.9844 Q974.9375,242.0469 976.2813,242.0469 Q976.9063,242.0469 977.5,241.7813 Q978.0938,241.5 978.7188,240.9219 L978.7188,243.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="184" x="996.25" y="242.1543">FHIRClientResourceProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="881" x2="1263" y1="254" y2="254"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="881" x2="1263" y1="262" y2="262"/><ellipse cx="891" cy="273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="343" x="900" y="276.2104">FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)</text><ellipse cx="891" cy="285.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="900" y="289.0151">process(ResourceEntry): void</text><polygon fill="#FFFF44" points="891,293.6094,895,297.6094,891,301.6094,887,297.6094" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="900" y="301.8198">processBadRequest(ResourceEntry, FhirServerResponse): void</text></a><!--MD5=[a45591fc44653b32084f6c40df0854b1]
class com.ibm.fhir.bucket.scanner.COSReader--><a href="COSReader.html" target="_top" title="COSReader.html" xlink:actuate="onRequest" xlink:href="COSReader.html" xlink:show="new" xlink:title="COSReader.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="176.0469" id="com.ibm.fhir.bucket.scanner.COSReader" style="stroke: #A80036; stroke-width: 1.5;" width="890" x="2493" y="177"/><ellipse cx="2898.75" cy="193" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2901.7188,198.6406 Q2901.1406,198.9375 2900.5,199.0781 Q2899.8594,199.2344 2899.1563,199.2344 Q2896.6563,199.2344 2895.3281,197.5938 Q2894.0156,195.9375 2894.0156,192.8125 Q2894.0156,189.6875 2895.3281,188.0313 Q2896.6563,186.375 2899.1563,186.375 Q2899.8594,186.375 2900.5,186.5313 Q2901.1563,186.6875 2901.7188,186.9844 L2901.7188,189.7031 Q2901.0938,189.125 2900.5,188.8594 Q2899.9063,188.5781 2899.2813,188.5781 Q2897.9375,188.5781 2897.25,189.6563 Q2896.5625,190.7188 2896.5625,192.8125 Q2896.5625,194.9063 2897.25,195.9844 Q2897.9375,197.0469 2899.2813,197.0469 Q2899.9063,197.0469 2900.5,196.7813 Q2901.0938,196.5 2901.7188,195.9219 L2901.7188,198.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="2919.25" y="197.1543">COSReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2494" x2="3382" y1="209" y2="209"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2494" x2="3382" y1="217" y2="217"/><ellipse cx="2504" cy="228" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="864" x="2513" y="231.2104">COSReader(ExecutorService, FileType, COSClient, Consumer&lt;ResourceEntry&gt;, int, DataAccess, boolean, int, boolean, double, Collection&lt;BucketPath&gt;)</text><ellipse cx="2504" cy="240.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2513" y="244.0151">signalStop(): void</text><ellipse cx="2504" cy="253.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2513" y="256.8198">waitForStop(): void</text><ellipse cx="2504" cy="266.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2513" y="269.6245">init(): void</text><ellipse cx="2504" cy="279.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="2513" y="282.4292">mainAllocationLoop(): void</text><polygon fill="#FFFF44" points="2504,287.0234,2508,291.0234,2504,295.0234,2500,291.0234" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2513" y="295.2339">safeSleep(long): void</text><polygon fill="#FFFF44" points="2504,299.8281,2508,303.8281,2504,307.8281,2500,303.8281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2513" y="308.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2504" cy="317.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="320" x="2513" y="320.8433">processNDJSON(BucketLoaderJob, BufferedReader): void</text><polygon fill="#FFFF44" points="2504,325.4375,2508,329.4375,2504,333.4375,2500,329.4375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="326" x="2513" y="333.6479">process(BucketLoaderJob, Resource, int, String): boolean</text><ellipse cx="2504" cy="343.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="2513" y="346.4526">validateInput(Resource): List&lt;Issue&gt;</text></a><!--MD5=[e1a4af336e160f27c55bcbc5171d2cfa]
class com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><a href="IdReferenceMappingVisitor.html" target="_top" title="IdReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="IdReferenceMappingVisitor.html" xlink:show="new" xlink:title="IdReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="86.4141" id="com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="343" x="1863.5" y="222"/><ellipse cx="1947.25" cy="238" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1950.2188,243.6406 Q1949.6406,243.9375 1949,244.0781 Q1948.3594,244.2344 1947.6563,244.2344 Q1945.1563,244.2344 1943.8281,242.5938 Q1942.5156,240.9375 1942.5156,237.8125 Q1942.5156,234.6875 1943.8281,233.0313 Q1945.1563,231.375 1947.6563,231.375 Q1948.3594,231.375 1949,231.5313 Q1949.6563,231.6875 1950.2188,231.9844 L1950.2188,234.7031 Q1949.5938,234.125 1949,233.8594 Q1948.4063,233.5781 1947.7813,233.5781 Q1946.4375,233.5781 1945.75,234.6563 Q1945.0625,235.7188 1945.0625,237.8125 Q1945.0625,239.9063 1945.75,240.9844 Q1946.4375,242.0469 1947.7813,242.0469 Q1948.4063,242.0469 1949,241.7813 Q1949.5938,241.5 1950.2188,240.9219 L1950.2188,243.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="1967.75" y="242.1543">IdReferenceMappingVisitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1864.5" x2="2205.5" y1="254" y2="254"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1864.5" x2="2205.5" y1="262" y2="262"/><ellipse cx="1874.5" cy="273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="317" x="1883.5" y="276.2104">IdReferenceMappingVisitor(Map&lt;String, String&gt;, String)</text><ellipse cx="1874.5" cy="285.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="1883.5" y="289.0151">visit(String, int, Resource): boolean</text><ellipse cx="1874.5" cy="298.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="1883.5" y="301.8198">visit(String, int, DomainResource): boolean</text></a><!--MD5=[434e0b04adee20dec453537cb4a35e44]
class com.ibm.fhir.bucket.scanner.NoCloseInputStream--><a href="NoCloseInputStream.html" target="_top" title="NoCloseInputStream.html" xlink:actuate="onRequest" xlink:href="NoCloseInputStream.html" xlink:show="new" xlink:title="NoCloseInputStream.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="73.6094" id="com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="1607.5" y="228"/><ellipse cx="1649.95" cy="244" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1652.9188,249.6406 Q1652.3406,249.9375 1651.7,250.0781 Q1651.0594,250.2344 1650.3563,250.2344 Q1647.8563,250.2344 1646.5281,248.5938 Q1645.2156,246.9375 1645.2156,243.8125 Q1645.2156,240.6875 1646.5281,239.0313 Q1647.8563,237.375 1650.3563,237.375 Q1651.0594,237.375 1651.7,237.5313 Q1652.3563,237.6875 1652.9188,237.9844 L1652.9188,240.7031 Q1652.2938,240.125 1651.7,239.8594 Q1651.1063,239.5781 1650.4813,239.5781 Q1649.1375,239.5781 1648.45,240.6563 Q1647.7625,241.7188 1647.7625,243.8125 Q1647.7625,245.9063 1648.45,246.9844 Q1649.1375,248.0469 1650.4813,248.0469 Q1651.1063,248.0469 1651.7,247.7813 Q1652.2938,247.5 1652.9188,246.9219 L1652.9188,249.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="1670.05" y="248.1543">NoCloseInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1608.5" x2="1827.5" y1="260" y2="260"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1608.5" x2="1827.5" y1="268" y2="268"/><ellipse cx="1618.5" cy="279" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="1627.5" y="282.2104">NoCloseInputStream(InputStream)</text><ellipse cx="1618.5" cy="291.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="1627.5" y="295.0151">close(): void</text></a><!--MD5=[117b4744d87af26d6202ac4a9292f012]
class com.ibm.fhir.bucket.scanner.CosScanner--><a href="CosScanner.html" target="_top" title="CosScanner.html" xlink:actuate="onRequest" xlink:href="CosScanner.html" xlink:show="new" xlink:title="CosScanner.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="188.8516" id="com.ibm.fhir.bucket.scanner.CosScanner" style="stroke: #A80036; stroke-width: 1.5;" width="504" x="2098" y="419.5"/><ellipse cx="2308.25" cy="435.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2311.2188,441.1406 Q2310.6406,441.4375 2310,441.5781 Q2309.3594,441.7344 2308.6563,441.7344 Q2306.1563,441.7344 2304.8281,440.0938 Q2303.5156,438.4375 2303.5156,435.3125 Q2303.5156,432.1875 2304.8281,430.5313 Q2306.1563,428.875 2308.6563,428.875 Q2309.3594,428.875 2310,429.0313 Q2310.6563,429.1875 2311.2188,429.4844 L2311.2188,432.2031 Q2310.5938,431.625 2310,431.3594 Q2309.4063,431.0781 2308.7813,431.0781 Q2307.4375,431.0781 2306.75,432.1563 Q2306.0625,433.2188 2306.0625,435.3125 Q2306.0625,437.4063 2306.75,438.4844 Q2307.4375,439.5469 2308.7813,439.5469 Q2309.4063,439.5469 2310,439.2813 Q2310.5938,439 2311.2188,438.4219 L2311.2188,441.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="2328.75" y="439.6543">CosScanner</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2099" x2="2601" y1="451.5" y2="451.5"/><ellipse cx="2109" cy="462.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="178" x="2118" y="465.7104">HEARTBEAT_INTERVAL_MS: long</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2099" x2="2601" y1="472.3047" y2="472.3047"/><ellipse cx="2109" cy="483.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="478" x="2118" y="486.5151">CosScanner(COSClient, Collection&lt;String&gt;, DataAccess, Set&lt;FileType&gt;, String, int)</text><ellipse cx="2109" cy="496.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2118" y="499.3198">init(): void</text><ellipse cx="2109" cy="508.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2118" y="512.1245">signalStop(): void</text><ellipse cx="2109" cy="521.7188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="2118" y="524.9292">waitForStop(): void</text><ellipse cx="2109" cy="534.5234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2118" y="537.7339">mainLoop(): void</text><polygon fill="#FFFF44" points="2109,542.3281,2113,546.3281,2109,550.3281,2105,546.3281" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2118" y="550.5386">safeSleep(long): void</text><polygon fill="#FFFF44" points="2109,555.1328,2113,559.1328,2109,563.1328,2105,559.1328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="2118" y="563.3433">scan(): void</text><polygon fill="#FFFF44" points="2109,567.9375,2113,571.9375,2109,575.9375,2105,571.9375" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="145" x="2118" y="576.1479">fileTyper(String): FileType</text><polygon fill="#FFFF44" points="2109,580.7422,2113,584.7422,2109,588.7422,2105,584.7422" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="2118" y="588.9526">handle(CosItem): void</text><polygon fill="#FFFF44" points="2109,593.5469,2113,597.5469,2109,601.5469,2105,597.5469" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2118" y="601.7573">heartbeat(): void</text></a><!--MD5=[0e3cd8e43eee1ca12f784a2afaf30c31]
class com.ibm.fhir.bucket.scanner.DataAccess--><a href="DataAccess.html" target="_top" title="DataAccess.html" xlink:actuate="onRequest" xlink:href="DataAccess.html" xlink:show="new" xlink:title="DataAccess.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="201.6563" id="com.ibm.fhir.bucket.scanner.DataAccess" style="stroke: #A80036; stroke-width: 1.5;" width="507" x="2637.5" y="413"/><ellipse cx="2849.75" cy="429" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2852.7188,434.6406 Q2852.1406,434.9375 2851.5,435.0781 Q2850.8594,435.2344 2850.1563,435.2344 Q2847.6563,435.2344 2846.3281,433.5938 Q2845.0156,431.9375 2845.0156,428.8125 Q2845.0156,425.6875 2846.3281,424.0313 Q2847.6563,422.375 2850.1563,422.375 Q2850.8594,422.375 2851.5,422.5313 Q2852.1563,422.6875 2852.7188,422.9844 L2852.7188,425.7031 Q2852.0938,425.125 2851.5,424.8594 Q2850.9063,424.5781 2850.2813,424.5781 Q2848.9375,424.5781 2848.25,425.6563 Q2847.5625,426.7188 2847.5625,428.8125 Q2847.5625,430.9063 2848.25,431.9844 Q2848.9375,433.0469 2850.2813,433.0469 Q2850.9063,433.0469 2851.5,432.7813 Q2852.0938,432.5 2852.7188,431.9219 L2852.7188,434.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="2870.25" y="433.1543">DataAccess</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2638.5" x2="3143.5" y1="445" y2="445"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2638.5" x2="3143.5" y1="453" y2="453"/><ellipse cx="2648.5" cy="464" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="2657.5" y="467.2104">DataAccess(IDatabaseAdapter, ITransactionProvider, String)</text><ellipse cx="2648.5" cy="476.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="2657.5" y="480.0151">init(): void</text><ellipse cx="2648.5" cy="489.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="2657.5" y="492.8198">registerBucketItem(CosItem): void</text><ellipse cx="2648.5" cy="502.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="481" x="2657.5" y="505.6245">allocateJobs(List&lt;BucketLoaderJob&gt;, FileType, int, int, Collection&lt;BucketPath&gt;): void</text><ellipse cx="2648.5" cy="515.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="2657.5" y="518.4292">recordLogicalId(String, String, long, int, Integer): void</text><ellipse cx="2648.5" cy="528.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="2657.5" y="531.2339">heartbeat(): void</text><ellipse cx="2648.5" cy="540.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="2657.5" y="544.0386">markJobDone(BucketLoaderJob): void</text><ellipse cx="2648.5" cy="553.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="340" x="2657.5" y="556.8433">recordLogicalIds(long, int, List&lt;ResourceIdValue&gt;, int): void</text><ellipse cx="2648.5" cy="566.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="2657.5" y="569.6479">recordErrors(long, int, List&lt;ResourceBundleError&gt;): void</text><ellipse cx="2648.5" cy="579.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="272" x="2657.5" y="582.4526">getLastProcessedLineNumber(long, int): Integer</text><ellipse cx="2648.5" cy="592.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="2657.5" y="595.2573">getResourceRefsForLine(long, int, int): List&lt;ResourceRef&gt;</text><ellipse cx="2648.5" cy="604.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="2657.5" y="608.062">selectRandomPatientIds(List&lt;String&gt;, int): void</text></a><!--MD5=[2367946adcfdd070486357efec45442a]
class com.ibm.fhir.bucket.api.IResourceEntryProcessor--><a href="../api/IResourceEntryProcessor.html" target="_top" title="../api/IResourceEntryProcessor.html" xlink:actuate="onRequest" xlink:href="../api/IResourceEntryProcessor.html" xlink:show="new" xlink:title="../api/IResourceEntryProcessor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="552.5" y="49.5"/><ellipse cx="569.3" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M565.2219,61.2656 L565.2219,59.1094 L572.6125,59.1094 L572.6125,61.2656 L570.1438,61.2656 L570.1438,69.3438 L572.6125,69.3438 L572.6125,71.5 L565.2219,71.5 L565.2219,69.3438 L567.6906,69.3438 L567.6906,61.2656 L565.2219,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="157" x="583.7" y="69.6543">IResourceEntryProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="553.5" x2="744.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="553.5" x2="744.5" y1="89.5" y2="89.5"/><ellipse cx="563.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="572.5" y="103.7104">process(ResourceEntry): void</text></a><!--MD5=[5722a3d6808db9ca982f2598f0d72edd]
class com.ibm.fhir.bucket.api.IResourceHandler--><a href="../api/IResourceHandler.html" target="_top" title="../api/IResourceHandler.html" xlink:actuate="onRequest" xlink:href="../api/IResourceHandler.html" xlink:show="new" xlink:title="../api/IResourceHandler.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="60.8047" id="com.ibm.fhir.bucket.api.IResourceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="302.5" y="49.5"/><ellipse cx="350.25" cy="65.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M346.1719,61.2656 L346.1719,59.1094 L353.5625,59.1094 L353.5625,61.2656 L351.0938,61.2656 L351.0938,69.3438 L353.5625,69.3438 L353.5625,71.5 L346.1719,71.5 L346.1719,69.3438 L348.6406,69.3438 L348.6406,61.2656 L346.1719,61.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="370.75" y="69.6543">IResourceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="303.5" x2="516.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="303.5" x2="516.5" y1="89.5" y2="89.5"/><ellipse cx="313.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="189" x="322.5" y="103.7104">process(ResourceEntry): boolean</text></a><!--MD5=[fa9a3b769145f837d7bc2faadf88dde7]
class java.io.InputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="60.8047" id="java.io.InputStream" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="1434.5" y="49.5"/><ellipse cx="1449.5" cy="65.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1449.6094,60.8438 L1448.4531,65.9219 L1450.7813,65.9219 L1449.6094,60.8438 Z M1448.125,58.6094 L1451.1094,58.6094 L1454.4688,71 L1452.0156,71 L1451.25,67.9375 L1447.9688,67.9375 L1447.2188,71 L1444.7813,71 L1448.125,58.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="1463.5" y="69.6543">InputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1435.5" x2="1542.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1435.5" x2="1542.5" y1="89.5" y2="89.5"/><ellipse cx="1445.5" cy="100.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="1454.5" y="103.7104">read(): int</text></a><!--MD5=[7bc894eae69de9994c6e46ebc6cb7767]
class java.io.PushbackInputStream--><a href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" target="_top" title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:actuate="onRequest" xlink:href="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:show="new" xlink:title="https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="73.6094" id="java.io.PushbackInputStream" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="1579" y="43"/><ellipse cx="1594" cy="59" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1596.9688,64.6406 Q1596.3906,64.9375 1595.75,65.0781 Q1595.1094,65.2344 1594.4063,65.2344 Q1591.9063,65.2344 1590.5781,63.5938 Q1589.2656,61.9375 1589.2656,58.8125 Q1589.2656,55.6875 1590.5781,54.0313 Q1591.9063,52.375 1594.4063,52.375 Q1595.1094,52.375 1595.75,52.5313 Q1596.4063,52.6875 1596.9688,52.9844 L1596.9688,55.7031 Q1596.3438,55.125 1595.75,54.8594 Q1595.1563,54.5781 1594.5313,54.5781 Q1593.1875,54.5781 1592.5,55.6563 Q1591.8125,56.7188 1591.8125,58.8125 Q1591.8125,60.9063 1592.5,61.9844 Q1593.1875,63.0469 1594.5313,63.0469 Q1595.1563,63.0469 1595.75,62.7813 Q1596.3438,62.5 1596.9688,61.9219 L1596.9688,64.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="1608" y="63.1543">PushbackInputStream</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1580" x2="1748" y1="75" y2="75"/><polygon fill="none" points="1590,81,1594,85,1590,89,1586,85" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="1599" y="89.2104">buf: byte[]</text><polygon fill="none" points="1590,93.8047,1594,97.8047,1590,101.8047,1586,97.8047" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="1599" y="102.0151">pos: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1580" x2="1748" y1="108.6094" y2="108.6094"/></a><!--MD5=[122ab473db8428a74a4b9eae00315f16]
class com.ibm.fhir.model.util.ReferenceMappingVisitor--><a href="../../model/util/ReferenceMappingVisitor.html" target="_top" title="../../model/util/ReferenceMappingVisitor.html" xlink:actuate="onRequest" xlink:href="../../model/util/ReferenceMappingVisitor.html" xlink:show="new" xlink:title="../../model/util/ReferenceMappingVisitor.html" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f19zaicnn8a800)" height="48" id="com.ibm.fhir.model.util.ReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.5;" width="310" x="1880" y="56"/><ellipse cx="1895" cy="72" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1897.9688,77.6406 Q1897.3906,77.9375 1896.75,78.0781 Q1896.1094,78.2344 1895.4063,78.2344 Q1892.9063,78.2344 1891.5781,76.5938 Q1890.2656,74.9375 1890.2656,71.8125 Q1890.2656,68.6875 1891.5781,67.0313 Q1892.9063,65.375 1895.4063,65.375 Q1896.1094,65.375 1896.75,65.5313 Q1897.4063,65.6875 1897.9688,65.9844 L1897.9688,68.7031 Q1897.3438,68.125 1896.75,67.8594 Q1896.1563,67.5781 1895.5313,67.5781 Q1894.1875,67.5781 1893.5,68.6563 Q1892.8125,69.7188 1892.8125,71.8125 Q1892.8125,73.9063 1893.5,74.9844 Q1894.1875,76.0469 1895.5313,76.0469 Q1896.1563,76.0469 1896.75,75.7813 Q1897.3438,75.5 1897.9688,74.9219 L1897.9688,77.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156" x="1909" y="76.1543">ReferenceMappingVisitor</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="120" x="2073" y="53"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="118" x="2074" y="65.1387">T extends Visitable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1881" x2="2189" y1="88" y2="88"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1881" x2="2189" y1="96" y2="96"/></a><!--MD5=[e077fa6cee75e7ddad706340d5a422b3]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor--><path d="M649,130.7837 C649,155.0225 649,184.0955 649,208.9761 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.BundleBreakerResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="642.0001,130.549,649,110.549,656.0001,130.549,642.0001,130.549" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[869ba41b732a6c73c189fc634a550b36]
reverse link java.io.InputStream to com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator--><path d="M1474.6622,130.0469 C1467.6763,154.4317 1459.2504,183.843 1452.0501,208.9761 " fill="none" id="java.io.InputStream&lt;-com.ibm.fhir.bucket.scanner.Sha256InputStreamDecorator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1468.0106,127.8477,1480.2481,110.549,1481.4692,131.7034,1468.0106,127.8477" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[12bd4cb48c7236030a4f7ce4c8be1d17]
reverse link com.ibm.fhir.bucket.api.IResourceHandler to com.ibm.fhir.bucket.scanner.ResourceHandler--><path d="M363.9468,124.8413 C335.9069,152.1433 300.04,187.0663 271.1235,215.2219 " fill="none" id="com.ibm.fhir.bucket.api.IResourceHandler&lt;-com.ibm.fhir.bucket.scanner.ResourceHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="359.4126,119.486,378.6254,110.549,369.1792,129.5167,359.4126,119.486" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b6bfc2b178dd5439783ec5833e79203b]
reverse link com.ibm.fhir.bucket.api.IResourceEntryProcessor to com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor--><path d="M764.9252,113.5542 C797.1388,124.0497 831.8236,136.4653 863,150 C910.6767,170.698 961.8368,198.7401 1001.6068,221.9514 " fill="none" id="com.ibm.fhir.bucket.api.IResourceEntryProcessor&lt;-com.ibm.fhir.bucket.scanner.FHIRClientResourceProcessor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="762.6913,120.1892,745.7668,107.4391,766.9484,106.8521,762.6913,120.1892" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[390a4327ac082dbcdf8c6bc63e2f449f]
reverse link com.ibm.fhir.model.util.ReferenceMappingVisitor to com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor--><path d="M2035,124.2375 C2035,153.749 2035,192.3647 2035,221.6841 " fill="none" id="com.ibm.fhir.model.util.ReferenceMappingVisitor&lt;-com.ibm.fhir.bucket.scanner.IdReferenceMappingVisitor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2028.0001,124.1856,2035,104.1855,2042.0001,124.1855,2028.0001,124.1856" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[99ab7726ceb1317eb372bc9558f40dad]
reverse link java.io.PushbackInputStream to com.ibm.fhir.bucket.scanner.NoCloseInputStream--><path d="M1680.5918,136.8424 C1689.2396,166.4691 1699.5694,201.858 1707.1808,227.9343 " fill="none" id="java.io.PushbackInputStream&lt;-com.ibm.fhir.bucket.scanner.NoCloseInputStream" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1673.8122,138.5978,1674.9277,117.4375,1687.2514,134.6749,1673.8122,138.5978" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2df4299674349d9baac8763e6dbd7b48]
link com.ibm.fhir.bucket.scanner.LoaderQueue to com.ibm.fhir.bucket.scanner.COSReader--><!--MD5=[4937a66a549d7072a2d3615583913a6e]
link com.ibm.fhir.bucket.scanner.LoaderQueue to com.ibm.fhir.bucket.scanner.CosScanner--><!--MD5=[b179d2cd9dfb3c797d4e7acafd30454d]
link com.ibm.fhir.bucket.scanner.CosScanner to com.ibm.fhir.bucket.scanner.DataAccess--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="186" x="1615.5" y="650.2822">UMLDoclet 2.0.7, PlantUML 1.2019.12</text><!--MD5=[e9b6f58955c60b2a68620b905716e721]
@startuml
    namespace com.ibm.fhir.bucket.scanner {

        interface LoaderQueue [[LoaderQueue.html]] {
            {abstract} +processEntry(String, String): void
        }

        class BundleBreakerResourceProcessor [[BundleBreakerResourceProcessor.html]] {
            +BundleBreakerResourceProcessor(COSClient, int, String, String)
            +process(ResourceEntry): void
            #process(String, Bundle): void
            #saveBundle(String, Bundle, int): void
            #writeBundle(Bundle, String): void
        }

        class Sha256InputStreamDecorator [[Sha256InputStreamDecorator.html]] {
            +Sha256InputStreamDecorator(InputStream)
            +getBase64Hash(): String
            +read(): int
            +read(byte[], int, int): int
            +close(): void
        }

        class ResourceHandler [[ResourceHandler.html]] {
            +ResourceHandler(ExecutorService, int, IResourceEntryProcessor)
            +signalStop(): void
            +waitForStop(): void
            +process(ResourceEntry): boolean
        }

        class FHIRClientResourceProcessor [[FHIRClientResourceProcessor.html]] {
            +FHIRClientResourceProcessor(FHIRBucketClient, DataAccess)
            +process(ResourceEntry): void
            #processBadRequest(ResourceEntry, FhirServerResponse): void
        }

        class COSReader [[COSReader.html]] {
            +COSReader(ExecutorService, FileType, COSClient, Consumer<ResourceEntry>, int, DataAccess, boolean, int, boolean, double, Collection<BucketPath>)
            +signalStop(): void
            +waitForStop(): void
            +init(): void
            +mainAllocationLoop(): void
            #safeSleep(long): void
            #markJobDone(BucketLoaderJob): void
            +processNDJSON(BucketLoaderJob, BufferedReader): void
            #process(BucketLoaderJob, Resource, int, String): boolean
            +validateInput(Resource): List<Issue>
        }

        class IdReferenceMappingVisitor [[IdReferenceMappingVisitor.html]] {
            +IdReferenceMappingVisitor(Map<String, String>, String)
            +visit(String, int, Resource): boolean
            +visit(String, int, DomainResource): boolean
        }

        class NoCloseInputStream [[NoCloseInputStream.html]] {
            +NoCloseInputStream(InputStream)
            +close(): void
        }

        class CosScanner [[CosScanner.html]] {
            {static} +HEARTBEAT_INTERVAL_MS: long
            +CosScanner(COSClient, Collection<String>, DataAccess, Set<FileType>, String, int)
            +init(): void
            +signalStop(): void
            +waitForStop(): void
            +mainLoop(): void
            #safeSleep(long): void
            #scan(): void
            {static} #fileTyper(String): FileType
            #handle(CosItem): void
            #heartbeat(): void
        }

        class DataAccess [[DataAccess.html]] {
            +DataAccess(IDatabaseAdapter, ITransactionProvider, String)
            +init(): void
            +registerBucketItem(CosItem): void
            +allocateJobs(List<BucketLoaderJob>, FileType, int, int, Collection<BucketPath>): void
            +recordLogicalId(String, String, long, int, Integer): void
            +heartbeat(): void
            +markJobDone(BucketLoaderJob): void
            +recordLogicalIds(long, int, List<ResourceIdValue>, int): void
            +recordErrors(long, int, List<ResourceBundleError>): void
            +getLastProcessedLineNumber(long, int): Integer
            +getResourceRefsForLine(long, int, int): List<ResourceRef>
            +selectRandomPatientIds(List<String>, int): void
        }

        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. BundleBreakerResourceProcessor
        java.io.InputStream <|- - Sha256InputStreamDecorator
        com.ibm.fhir.bucket.api.IResourceHandler <|.. ResourceHandler
        com.ibm.fhir.bucket.api.IResourceEntryProcessor <|.. FHIRClientResourceProcessor
        com.ibm.fhir.model.util.ReferenceMappingVisitor <|- - IdReferenceMappingVisitor
        java.io.PushbackInputStream <|- - NoCloseInputStream
    }

    namespace com.ibm.fhir.bucket.api {
        interface IResourceEntryProcessor [[../api/IResourceEntryProcessor.html]] {
            {abstract} +process(ResourceEntry): void
        }
        interface IResourceHandler [[../api/IResourceHandler.html]] {
            {abstract} +process(ResourceEntry): boolean
        }
    }

    namespace java.io {
        abstract class InputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true]] {
            {abstract} +read(): int
        }
        class PushbackInputStream [[https://docs.oracle.com/javase/8/docs/api/java/io/PushbackInputStream.html?is-external=true]] {
            #buf: byte[]
            #pos: int
        }
    }

    namespace com.ibm.fhir.model.util {
        class ReferenceMappingVisitor<T extends Visitable> [[../../model/util/ReferenceMappingVisitor.html]] {
        }
    }

    center footer UMLDoclet 2.0.7, PlantUML 1.2019.12
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>